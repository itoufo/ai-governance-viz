<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Governance Matrix | 3D Neural Network</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;900&family=Noto+Sans+JP:wght@300;400;500;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        :root {
            --cyan: #00f5ff;
            --magenta: #ff00ff;
            --electric-blue: #0066ff;
            --neon-green: #00ff88;
            --orange: #ff6600;
            --yellow: #ffcc00;
            --purple: #cc00ff;
            --teal: #00ffcc;
            --void: #0a0a0f;
            --deep-void: #030305;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: var(--deep-void);
            color: white;
            overflow: hidden;
            min-height: 100vh;
            cursor: crosshair;
        }

        #canvas3d {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        /* Scanlines */
        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(0, 0, 0, 0.08) 2px,
                rgba(0, 0, 0, 0.08) 4px
            );
            mix-blend-mode: overlay;
        }

        /* HUD Elements */
        .hud {
            position: fixed;
            z-index: 100;
            pointer-events: none;
        }

        .hud-interactive {
            pointer-events: auto;
        }

        /* Top HUD */
        .hud-top {
            top: 0;
            left: 0;
            right: 0;
            height: 80px;
            background: linear-gradient(180deg, rgba(0,0,0,0.8) 0%, transparent 100%);
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 20px 30px;
        }

        .hud-title {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .hud-title h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 18px;
            font-weight: 700;
            letter-spacing: 4px;
            color: var(--cyan);
            text-shadow: 0 0 20px var(--cyan), 0 0 40px var(--cyan);
        }

        .hud-title span {
            font-family: 'Share Tech Mono', monospace;
            font-size: 10px;
            color: rgba(0, 245, 255, 0.6);
            letter-spacing: 2px;
        }

        /* Stats Panel */
        .stats-panel {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 24px;
            font-weight: 700;
            color: var(--cyan);
            text-shadow: 0 0 15px var(--cyan);
        }

        .stat-label {
            font-family: 'Share Tech Mono', monospace;
            font-size: 9px;
            color: rgba(255, 255, 255, 0.5);
            letter-spacing: 1px;
            margin-top: 2px;
        }

        /* Level / XP Bar */
        .level-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .level-badge {
            width: 50px;
            height: 50px;
            border: 2px solid var(--cyan);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: radial-gradient(circle, rgba(0, 245, 255, 0.2) 0%, transparent 70%);
            box-shadow: 0 0 20px rgba(0, 245, 255, 0.3), inset 0 0 15px rgba(0, 245, 255, 0.1);
        }

        .level-badge span {
            font-family: 'Orbitron', sans-serif;
            font-size: 18px;
            font-weight: 900;
            color: var(--cyan);
            text-shadow: 0 0 10px var(--cyan);
        }

        .xp-container {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .xp-bar {
            width: 150px;
            height: 8px;
            background: rgba(0, 245, 255, 0.1);
            border: 1px solid rgba(0, 245, 255, 0.3);
            border-radius: 4px;
            overflow: hidden;
        }

        .xp-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--cyan), var(--magenta));
            box-shadow: 0 0 10px var(--cyan);
            transition: width 0.5s ease;
            width: 0%;
        }

        .xp-text {
            font-family: 'Share Tech Mono', monospace;
            font-size: 10px;
            color: rgba(0, 245, 255, 0.7);
        }

        /* Side Panel - Domains */
        .hud-left {
            top: 100px;
            left: 20px;
            width: 280px;
        }

        .domain-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .domain-card {
            background: rgba(0, 10, 20, 0.8);
            border: 1px solid rgba(0, 245, 255, 0.2);
            border-radius: 6px;
            padding: 12px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            backdrop-filter: blur(10px);
        }

        .domain-card:hover {
            border-color: var(--cyan);
            background: rgba(0, 245, 255, 0.05);
            transform: translateX(5px);
            box-shadow: 0 0 20px rgba(0, 245, 255, 0.2);
        }

        .domain-card.active {
            border-color: var(--magenta);
            background: rgba(255, 0, 255, 0.1);
            box-shadow: 0 0 30px rgba(255, 0, 255, 0.3);
        }

        .domain-card.completed {
            border-color: var(--neon-green);
        }

        .domain-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            border: 2px solid;
            flex-shrink: 0;
        }

        .domain-info {
            flex: 1;
            min-width: 0;
        }

        .domain-name {
            font-size: 12px;
            font-weight: 700;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .domain-progress {
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }

        .domain-progress-fill {
            height: 100%;
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .domain-score {
            font-family: 'Orbitron', sans-serif;
            font-size: 14px;
            font-weight: 700;
            min-width: 40px;
            text-align: right;
        }

        /* Right Panel - Detail */
        .hud-right {
            top: 100px;
            right: 20px;
            width: 400px;
            max-height: calc(100vh - 140px);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .detail-panel {
            background: rgba(0, 10, 20, 0.9);
            border: 1px solid rgba(0, 245, 255, 0.3);
            border-radius: 8px;
            backdrop-filter: blur(20px);
            opacity: 0;
            transform: translateX(20px);
            transition: all 0.4s ease;
            display: flex;
            flex-direction: column;
            max-height: 100%;
        }

        .detail-panel.visible {
            opacity: 1;
            transform: translateX(0);
        }

        .detail-header {
            padding: 20px;
            border-bottom: 1px solid rgba(0, 245, 255, 0.2);
            flex-shrink: 0;
        }

        .detail-domain-id {
            font-family: 'Orbitron', sans-serif;
            font-size: 10px;
            letter-spacing: 3px;
            margin-bottom: 6px;
        }

        .detail-domain-name {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .detail-domain-name .icon {
            font-size: 24px;
        }

        .detail-domain-desc {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
            line-height: 1.5;
        }

        .detail-content {
            padding: 15px 20px;
            overflow-y: auto;
            flex: 1;
        }

        .detail-content::-webkit-scrollbar {
            width: 4px;
        }

        .detail-content::-webkit-scrollbar-track {
            background: rgba(0, 245, 255, 0.05);
        }

        .detail-content::-webkit-scrollbar-thumb {
            background: var(--cyan);
            border-radius: 2px;
        }

        .process-card {
            background: rgba(0, 245, 255, 0.03);
            border: 1px solid rgba(0, 245, 255, 0.1);
            border-radius: 6px;
            padding: 12px 15px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .process-card::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 3px;
            height: 100%;
            background: var(--cyan);
            opacity: 0.5;
            transition: opacity 0.3s ease;
        }

        .process-card:hover {
            background: rgba(0, 245, 255, 0.08);
            border-color: rgba(0, 245, 255, 0.3);
            transform: translateX(3px);
        }

        .process-card:hover::before {
            opacity: 1;
            box-shadow: 0 0 10px var(--cyan);
        }

        .process-card.checked {
            border-color: var(--neon-green);
        }

        .process-card.checked::before {
            background: var(--neon-green);
        }

        .process-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }

        .process-code {
            font-family: 'Orbitron', sans-serif;
            font-size: 10px;
            font-weight: 700;
            padding: 3px 8px;
            border: 1px solid;
            border-radius: 3px;
        }

        .process-name {
            font-size: 12px;
            font-weight: 700;
        }

        .process-check {
            margin-left: auto;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(0, 245, 255, 0.3);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 12px;
        }

        .process-card.checked .process-check {
            background: var(--neon-green);
            border-color: var(--neon-green);
            box-shadow: 0 0 15px var(--neon-green);
        }

        .process-text {
            font-size: 11px;
            line-height: 1.7;
            color: rgba(255, 255, 255, 0.8);
        }

        /* Bottom HUD */
        .hud-bottom {
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .control-btn {
            background: rgba(0, 10, 20, 0.8);
            border: 1px solid var(--cyan);
            border-radius: 6px;
            padding: 10px 20px;
            color: var(--cyan);
            font-family: 'Orbitron', sans-serif;
            font-size: 11px;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .control-btn:hover {
            background: var(--cyan);
            color: var(--deep-void);
            box-shadow: 0 0 30px var(--cyan);
        }

        .control-btn.active {
            background: var(--magenta);
            border-color: var(--magenta);
            color: white;
            box-shadow: 0 0 30px var(--magenta);
        }

        /* Achievement Popup */
        .achievement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: linear-gradient(135deg, rgba(0, 20, 40, 0.95) 0%, rgba(10, 10, 30, 0.95) 100%);
            border: 2px solid var(--neon-green);
            border-radius: 12px;
            padding: 30px 50px;
            text-align: center;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 0 60px rgba(0, 255, 136, 0.4);
        }

        .achievement-popup.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            pointer-events: auto;
        }

        .achievement-icon {
            font-size: 60px;
            margin-bottom: 15px;
            animation: achievementBounce 0.6s ease infinite;
        }

        @keyframes achievementBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .achievement-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 14px;
            color: var(--neon-green);
            letter-spacing: 3px;
            margin-bottom: 10px;
            text-shadow: 0 0 20px var(--neon-green);
        }

        .achievement-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .achievement-desc {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }

        .achievement-xp {
            margin-top: 15px;
            font-family: 'Orbitron', sans-serif;
            font-size: 18px;
            color: var(--yellow);
            text-shadow: 0 0 15px var(--yellow);
        }

        /* Minimap */
        .minimap {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 150px;
            height: 150px;
            background: rgba(0, 10, 20, 0.8);
            border: 1px solid rgba(0, 245, 255, 0.3);
            border-radius: 8px;
            z-index: 100;
            overflow: hidden;
        }

        .minimap-canvas {
            width: 100%;
            height: 100%;
        }

        .minimap-label {
            position: absolute;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Share Tech Mono', monospace;
            font-size: 8px;
            color: rgba(0, 245, 255, 0.5);
            letter-spacing: 1px;
        }

        /* Instructions */
        .instructions {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 100;
            font-family: 'Share Tech Mono', monospace;
            font-size: 10px;
            color: rgba(0, 245, 255, 0.4);
        }

        .instructions div {
            margin-bottom: 4px;
        }

        .key {
            display: inline-block;
            padding: 2px 6px;
            border: 1px solid rgba(0, 245, 255, 0.3);
            border-radius: 3px;
            margin-right: 5px;
            font-size: 9px;
        }

        /* Particle effects overlay */
        .particles-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 50;
        }

        /* Glitch effect */
        .glitch-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
            opacity: 0;
            background: linear-gradient(90deg,
                rgba(255,0,255,0.1) 0%,
                transparent 50%,
                rgba(0,255,255,0.1) 100%
            );
        }

        /* Tooltip */
        .tooltip {
            position: fixed;
            background: rgba(0, 10, 20, 0.95);
            border: 1px solid var(--cyan);
            border-radius: 6px;
            padding: 10px 15px;
            font-size: 11px;
            max-width: 250px;
            z-index: 3000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease;
            box-shadow: 0 0 20px rgba(0, 245, 255, 0.3);
        }

        .tooltip.visible {
            opacity: 1;
        }

        /* Quiz Modal */
        .quiz-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 5000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .quiz-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        .quiz-modal {
            background: linear-gradient(135deg, rgba(0, 20, 40, 0.98) 0%, rgba(10, 10, 30, 0.98) 100%);
            border: 2px solid var(--cyan);
            border-radius: 16px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow: hidden;
            transform: scale(0.8) translateY(50px);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 0 60px rgba(0, 245, 255, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .quiz-overlay.active .quiz-modal {
            transform: scale(1) translateY(0);
        }

        .quiz-header {
            padding: 25px 30px;
            border-bottom: 1px solid rgba(0, 245, 255, 0.2);
            position: relative;
            overflow: hidden;
        }

        .quiz-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--cyan), var(--magenta), transparent);
            animation: quizHeaderGlow 2s ease infinite;
        }

        @keyframes quizHeaderGlow {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .quiz-domain-tag {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border: 1px solid;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            margin-bottom: 12px;
        }

        .quiz-domain-tag .icon {
            font-size: 16px;
        }

        .quiz-process-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .quiz-process-code {
            font-family: 'Orbitron', sans-serif;
            font-size: 14px;
            font-weight: 700;
            padding: 5px 12px;
            border: 2px solid var(--cyan);
            border-radius: 4px;
            color: var(--cyan);
        }

        .quiz-process-name {
            font-size: 18px;
            font-weight: 700;
        }

        .quiz-challenge-label {
            font-family: 'Share Tech Mono', monospace;
            font-size: 10px;
            letter-spacing: 2px;
            color: var(--magenta);
            text-transform: uppercase;
        }

        .quiz-body {
            padding: 25px 30px;
        }

        .quiz-question {
            font-size: 16px;
            line-height: 1.8;
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(0, 245, 255, 0.05);
            border-left: 3px solid var(--cyan);
            border-radius: 0 8px 8px 0;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .quiz-option {
            padding: 15px 20px;
            background: rgba(0, 10, 20, 0.6);
            border: 1px solid rgba(0, 245, 255, 0.2);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            overflow: hidden;
        }

        .quiz-option::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 4px;
            height: 100%;
            background: var(--cyan);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .quiz-option:hover {
            border-color: var(--cyan);
            background: rgba(0, 245, 255, 0.08);
            transform: translateX(5px);
        }

        .quiz-option:hover::before {
            opacity: 1;
        }

        .quiz-option.selected {
            border-color: var(--magenta);
            background: rgba(255, 0, 255, 0.1);
        }

        .quiz-option.selected::before {
            background: var(--magenta);
            opacity: 1;
        }

        .quiz-option.correct {
            border-color: var(--neon-green);
            background: rgba(0, 255, 136, 0.15);
            animation: correctPulse 0.5s ease;
        }

        .quiz-option.correct::before {
            background: var(--neon-green);
            opacity: 1;
        }

        @keyframes correctPulse {
            0%, 100% { box-shadow: 0 0 0 rgba(0, 255, 136, 0); }
            50% { box-shadow: 0 0 30px rgba(0, 255, 136, 0.5); }
        }

        .quiz-option.incorrect {
            border-color: #ff4444;
            background: rgba(255, 68, 68, 0.15);
            animation: incorrectShake 0.5s ease;
        }

        .quiz-option.incorrect::before {
            background: #ff4444;
            opacity: 1;
        }

        @keyframes incorrectShake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }

        .quiz-option-marker {
            width: 30px;
            height: 30px;
            border: 2px solid rgba(0, 245, 255, 0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Orbitron', sans-serif;
            font-size: 12px;
            font-weight: 700;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .quiz-option:hover .quiz-option-marker {
            border-color: var(--cyan);
            color: var(--cyan);
        }

        .quiz-option.selected .quiz-option-marker {
            border-color: var(--magenta);
            background: var(--magenta);
            color: white;
        }

        .quiz-option.correct .quiz-option-marker {
            border-color: var(--neon-green);
            background: var(--neon-green);
            color: var(--deep-void);
        }

        .quiz-option.incorrect .quiz-option-marker {
            border-color: #ff4444;
            background: #ff4444;
            color: white;
        }

        .quiz-option-text {
            flex: 1;
            font-size: 14px;
            line-height: 1.5;
        }

        .quiz-footer {
            padding: 20px 30px;
            border-top: 1px solid rgba(0, 245, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .quiz-stats {
            display: flex;
            gap: 20px;
        }

        .quiz-stat {
            text-align: center;
        }

        .quiz-stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 18px;
            font-weight: 700;
        }

        .quiz-stat-label {
            font-family: 'Share Tech Mono', monospace;
            font-size: 9px;
            color: rgba(255, 255, 255, 0.5);
            letter-spacing: 1px;
        }

        .quiz-buttons {
            display: flex;
            gap: 10px;
        }

        .quiz-btn {
            padding: 12px 25px;
            border-radius: 6px;
            font-family: 'Orbitron', sans-serif;
            font-size: 12px;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }

        .quiz-btn-submit {
            background: linear-gradient(135deg, var(--cyan) 0%, var(--electric-blue) 100%);
            color: var(--deep-void);
            font-weight: 700;
        }

        .quiz-btn-submit:hover:not(:disabled) {
            box-shadow: 0 0 30px var(--cyan);
            transform: translateY(-2px);
        }

        .quiz-btn-submit:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .quiz-btn-skip {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: rgba(255, 255, 255, 0.5);
        }

        .quiz-btn-skip:hover {
            border-color: rgba(255, 255, 255, 0.5);
            color: white;
        }

        /* Combo Display */
        .combo-display {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            font-family: 'Orbitron', sans-serif;
            font-size: 48px;
            font-weight: 900;
            color: var(--yellow);
            text-shadow: 0 0 30px var(--yellow), 0 0 60px var(--orange);
            z-index: 6000;
            pointer-events: none;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .combo-display.show {
            transform: translate(-50%, -50%) scale(1);
            animation: comboPop 0.8s ease forwards;
        }

        @keyframes comboPop {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            20% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            40% { transform: translate(-50%, -50%) scale(1); }
            100% { transform: translate(-50%, -60%) scale(1); opacity: 0; }
        }

        .combo-display .combo-text {
            font-size: 20px;
            display: block;
            color: var(--orange);
        }

        /* Quiz Result Animation */
        .quiz-result {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Orbitron', sans-serif;
            text-align: center;
            z-index: 6000;
            pointer-events: none;
            opacity: 0;
        }

        .quiz-result.show {
            animation: resultShow 1.5s ease forwards;
        }

        @keyframes resultShow {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            20% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
            40% { transform: translate(-50%, -50%) scale(1); }
            70% { opacity: 1; }
            100% { opacity: 0; transform: translate(-50%, -60%) scale(1); }
        }

        .quiz-result.correct .result-icon {
            font-size: 80px;
            display: block;
            margin-bottom: 10px;
            animation: iconBounce 0.5s ease infinite;
        }

        .quiz-result.correct .result-text {
            font-size: 32px;
            font-weight: 900;
            color: var(--neon-green);
            text-shadow: 0 0 30px var(--neon-green);
        }

        .quiz-result.correct .result-xp {
            font-size: 24px;
            color: var(--yellow);
            text-shadow: 0 0 20px var(--yellow);
            margin-top: 10px;
        }

        .quiz-result.incorrect .result-icon {
            font-size: 80px;
            display: block;
            margin-bottom: 10px;
        }

        .quiz-result.incorrect .result-text {
            font-size: 32px;
            font-weight: 900;
            color: #ff4444;
            text-shadow: 0 0 30px #ff4444;
        }

        @keyframes iconBounce {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
        }
    </style>
</head>
<body>
    <canvas id="canvas3d"></canvas>
    <div class="scanlines"></div>
    <div class="glitch-overlay" id="glitchOverlay"></div>
    <canvas class="particles-overlay" id="particlesOverlay"></canvas>

    <!-- Top HUD -->
    <div class="hud hud-top">
        <div class="hud-title">
            <h1>AI GOVERNANCE MATRIX</h1>
            <span>NEURAL NETWORK VISUALIZATION v3.0</span>
        </div>

        <div class="stats-panel hud-interactive">
            <div class="stat-item">
                <div class="stat-value" id="checkedCount">0</div>
                <div class="stat-label">CHECKED</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="totalCount">64</div>
                <div class="stat-label">TOTAL</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="completionRate">0%</div>
                <div class="stat-label">COMPLETION</div>
            </div>
        </div>

        <div class="level-container hud-interactive">
            <div class="level-badge">
                <span id="levelNum">1</span>
            </div>
            <div class="xp-container">
                <div class="xp-bar">
                    <div class="xp-fill" id="xpFill"></div>
                </div>
                <div class="xp-text"><span id="currentXP">0</span> / <span id="maxXP">100</span> XP</div>
            </div>
        </div>
    </div>

    <!-- Left Panel - Domain List -->
    <div class="hud hud-left hud-interactive">
        <div class="domain-list" id="domainList"></div>
    </div>

    <!-- Right Panel - Detail -->
    <div class="hud hud-right hud-interactive">
        <div class="detail-panel" id="detailPanel">
            <div class="detail-header" id="detailHeader">
                <div class="detail-domain-id" id="detailDomainId">DOMAIN.01</div>
                <div class="detail-domain-name" id="detailDomainName">
                    <span class="icon">ğŸ‘</span>
                    <span>äººé–“ç›£ç£</span>
                </div>
                <div class="detail-domain-desc" id="detailDomainDesc">AIã®åˆ¤æ–­ã«å¯¾ã™ã‚‹äººé–“ã®æœ€çµ‚æ±ºå®šæ¨©ãƒ»ä»‹å…¥ãƒ»ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰æ©Ÿèƒ½ã®ç¢ºä¿</div>
            </div>
            <div class="detail-content" id="detailContent"></div>
        </div>
    </div>

    <!-- Bottom Controls -->
    <div class="hud hud-bottom hud-interactive">
        <button class="control-btn" id="btnRotate" onclick="toggleAutoRotate()">AUTO ROTATE</button>
        <button class="control-btn" id="btnReset" onclick="resetCamera()">RESET VIEW</button>
        <button class="control-btn" id="btnExport" onclick="exportProgress()">EXPORT DATA</button>
    </div>

    <!-- Minimap -->
    <div class="minimap">
        <canvas class="minimap-canvas" id="minimapCanvas"></canvas>
        <div class="minimap-label">ORBITAL VIEW</div>
    </div>

    <!-- Instructions -->
    <div class="instructions">
        <div><span class="key">DRAG</span> Rotate View</div>
        <div><span class="key">SCROLL</span> Zoom</div>
        <div><span class="key">CLICK</span> Select Node</div>
        <div><span class="key">âš”</span> Answer Quiz to Conquer</div>
    </div>

    <!-- Achievement Popup -->
    <div class="achievement-popup" id="achievementPopup">
        <div class="achievement-icon" id="achievementIcon">ğŸ†</div>
        <div class="achievement-title">ACHIEVEMENT UNLOCKED</div>
        <div class="achievement-name" id="achievementName">First Steps</div>
        <div class="achievement-desc" id="achievementDesc">Complete your first checklist item</div>
        <div class="achievement-xp" id="achievementXP">+50 XP</div>
    </div>

    <!-- Tooltip -->
    <div class="tooltip" id="tooltip"></div>

    <!-- Quiz Overlay -->
    <div class="quiz-overlay" id="quizOverlay">
        <div class="quiz-modal">
            <div class="quiz-header">
                <div class="quiz-domain-tag" id="quizDomainTag">
                    <span class="icon">ğŸ‘</span>
                    <span>äººé–“ç›£ç£</span>
                </div>
                <div class="quiz-process-info">
                    <span class="quiz-process-code" id="quizProcessCode">R1</span>
                    <span class="quiz-process-name" id="quizProcessName">æ–¹é‡ãƒ»è²¬ä»»</span>
                </div>
                <div class="quiz-challenge-label">âš” CHALLENGE TO CONQUER âš”</div>
            </div>
            <div class="quiz-body">
                <div class="quiz-question" id="quizQuestion">
                    ã“ã®é …ç›®ã‚’æ”»ç•¥ã™ã‚‹ãŸã‚ã®ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã«ç­”ãˆã¦ãã ã•ã„ã€‚
                </div>
                <div class="quiz-options" id="quizOptions">
                    <!-- Options will be generated dynamically -->
                </div>
            </div>
            <div class="quiz-footer">
                <div class="quiz-stats">
                    <div class="quiz-stat">
                        <div class="quiz-stat-value" id="quizCombo" style="color: var(--yellow);">0</div>
                        <div class="quiz-stat-label">COMBO</div>
                    </div>
                    <div class="quiz-stat">
                        <div class="quiz-stat-value" id="quizStreak" style="color: var(--neon-green);">0</div>
                        <div class="quiz-stat-label">STREAK</div>
                    </div>
                </div>
                <div class="quiz-buttons">
                    <button class="quiz-btn quiz-btn-skip" onclick="closeQuiz()">CANCEL</button>
                    <button class="quiz-btn quiz-btn-submit" id="quizSubmitBtn" onclick="submitQuiz()" disabled>SUBMIT</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Combo Display -->
    <div class="combo-display" id="comboDisplay">
        <span class="combo-count">5</span>
        <span class="combo-text">COMBO!</span>
    </div>

    <!-- Quiz Result -->
    <div class="quiz-result" id="quizResult">
        <span class="result-icon">âœ“</span>
        <span class="result-text">CONQUERED!</span>
        <span class="result-xp">+25 XP</span>
    </div>

    <script>
        // ============ DATA ============
        const domainData = [
            {
                id: '01', name: 'äººé–“ç›£ç£', nameEn: 'Human Oversight', icon: 'ğŸ‘',
                color: '#00f5ff',
                desc: 'AIã®åˆ¤æ–­ã«å¯¾ã™ã‚‹äººé–“ã®æœ€çµ‚æ±ºå®šæ¨©ãƒ»ä»‹å…¥ãƒ»ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰æ©Ÿèƒ½ã®ç¢ºä¿',
                processes: [
                    { code: 'R1', name: 'æ–¹é‡ãƒ»è²¬ä»»', text: 'AIã®åˆ¤æ–­ã«å¯¾ã—ã¦ã€äººé–“ãŒæœ€çµ‚æ±ºå®šã‚„æ‰¿èªã‚’è¡Œã†ç¯„å›²ãƒ»æ¨©é™ãƒ»è²¬ä»»è€…ãŒæ˜ç¢ºã«è¦å®šãƒ»æ–‡æ›¸åŒ–ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R2', name: 'ãƒªã‚¹ã‚¯è©•ä¾¡', text: 'äººé–“ã®ä»‹å…¥ï¼ˆHIC/HITLï¼‰ãŒä¸å¯æ¬ ãªé«˜ãƒªã‚¹ã‚¯ãªåˆ©ç”¨ã‚·ãƒŠãƒªã‚ªã‚„ä¾‹å¤–ã‚±ãƒ¼ã‚¹ãŒç‰¹å®šãƒ»è©•ä¾¡ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R3', name: 'è¨­è¨ˆãƒ»æ¤œè¨¼', text: 'ç•°å¸¸æ™‚ã«äººé–“ãŒå³åº§ã«AIã‚’åœæ­¢ã€ã¾ãŸã¯åˆ¤æ–­ã‚’ä¸Šæ›¸ãï¼ˆã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ï¼‰ã§ãã‚‹æ©Ÿèƒ½ãŒå®Ÿè£…ãƒ»æ¤œè¨¼ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R4', name: 'è³‡ç”£ãƒ»ãƒ­ã‚°', text: 'äººé–“ã«ã‚ˆã‚‹æ‰¿èªã€ä»‹å…¥ã€ä¸Šæ›¸ãæ“ä½œã®è¨˜éŒ²ãŒã€ç›£æŸ»è¨¼è·¡ã¨ã—ã¦ç¢ºå®Ÿã«ä¿å…¨ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R5', name: 'ç›£è¦–ãƒ»æ¤œçŸ¥', text: 'AIã®åˆ¤æ–­ç²¾åº¦åŠ£åŒ–ã‚„æš´èµ°ã®å…†å€™ã‚’æ¤œçŸ¥ã—ã€ç›£ç£è€…ã¸å³åº§ã«é€šçŸ¥ã™ã‚‹ç›£è¦–ä½“åˆ¶ãŒã‚ã‚‹ã‹ã€‚' },
                    { code: 'R6', name: 'å°ã˜è¾¼ã‚ãƒ»å¾©æ—§', text: 'äººé–“ãŒä»‹å…¥ã—ã¦AIã‚’åœæ­¢ã•ã›ãŸå¾Œã€æ‰‹å‹•æ¥­å‹™ã¸ã®åˆ‡ã‚Šæ›¿ãˆã‚„å®‰å…¨ãªå¾©æ—§ã‚’è¡Œã†æ‰‹é †ãŒæ•´å‚™ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R7', name: 'å¯¾å¤–å¯¾å¿œ', text: 'é‡è¦ãªæ±ºå®šã«éš›ã—ã¦ã€Œäººé–“ãŒé–¢ä¸ã—ã¦ã„ã‚‹ã€äº‹å®Ÿã‚’ã€åˆ©ç”¨è€…ã‚„é–¢ä¿‚è€…ã¸é©åˆ‡ã«èª¬æ˜ãƒ»é€šçŸ¥ã§ãã‚‹ã‹ã€‚' },
                    { code: 'R8', name: 'æ”¹å–„ãƒ»æ˜¯æ­£', text: 'äººé–“ç›£ç£ãŒæ©Ÿèƒ½ã—ãªã‹ã£ãŸäº‹ä¾‹ã‚„ãƒ’ãƒ¤ãƒªãƒãƒƒãƒˆã‚’åˆ†æã—ã€ç›£ç£ä½“åˆ¶ã‚„ä»‹å…¥åŸºæº–ã®è¦‹ç›´ã—ã‚’è¡Œã£ã¦ã„ã‚‹ã‹ã€‚' }
                ]
            },
            {
                id: '02', name: 'ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼', nameEn: 'Privacy', icon: 'ğŸ”',
                color: '#ff00ff',
                desc: 'å€‹äººæƒ…å ±ä¿è­·ã¨ãƒ‡ãƒ¼ã‚¿ã®é©æ­£ãªç®¡ç†ãƒ»åˆ©ç”¨ã®ç¢ºä¿',
                processes: [
                    { code: 'R1', name: 'æ–¹é‡ãƒ»è²¬ä»»', text: 'å€‹äººæƒ…å ±ä¿è­·æ–¹é‡ã€ãƒ‡ãƒ¼ã‚¿ã®ç›®çš„å¤–åˆ©ç”¨ç¦æ­¢ã€æœ€å°åŒ–ã®åŸå‰‡ãŒè¦å®šã•ã‚Œã€è²¬ä»»è€…ãŒæ˜ç¢ºã‹ã€‚' },
                    { code: 'R2', name: 'ãƒªã‚¹ã‚¯è©•ä¾¡', text: 'AIåˆ©ç”¨ã«ä¼´ã†ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼å½±éŸ¿è©•ä¾¡ï¼ˆPIAï¼‰ã‚’å®Ÿæ–½ã—ã€ãƒ‡ãƒ¼ã‚¿ä¸»ä½“ã®æ¨©åˆ©ä¾µå®³ãƒªã‚¹ã‚¯ã‚’è©•ä¾¡ã—ã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R3', name: 'è¨­è¨ˆãƒ»æ¤œè¨¼', text: 'ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·æŠ€è¡“ï¼ˆåŒ¿ååŒ–ã€ç§˜å¯†è¨ˆç®—ç­‰ï¼‰ã®å°å…¥ã‚„ã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã®ä¸é©åˆ‡ãªå€‹äººç‰¹å®šæ’é™¤ãŒæ¤œè¨¼ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R4', name: 'è³‡ç”£ãƒ»ãƒ­ã‚°', text: 'å­¦ç¿’ãƒ»æ¨è«–ã«ç”¨ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®å°å¸³ãŒæ•´å‚™ã•ã‚Œã€åˆ©ç”¨å±¥æ­´ã€ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ã€å‰Šé™¤è¨˜éŒ²ãŒä¿å…¨ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R5', name: 'ç›£è¦–ãƒ»æ¤œçŸ¥', text: 'ç›®çš„å¤–ã®ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã‚„ã€ç•°å¸¸ãªãƒ‡ãƒ¼ã‚¿æŒã¡å‡ºã—ç­‰ã‚’æ¤œçŸ¥ã™ã‚‹ä»•çµ„ã¿ã¯ã‚ã‚‹ã‹ã€‚' },
                    { code: 'R6', name: 'å°ã˜è¾¼ã‚ãƒ»å¾©æ—§', text: 'ãƒ‡ãƒ¼ã‚¿æ¼ãˆã„ç™ºç”Ÿæ™‚ã«ã€å¯¾è±¡ãƒ‡ãƒ¼ã‚¿ã®éš”é›¢ã‚„ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã®åœæ­¢ã‚’è¿…é€Ÿã«è¡Œã†æ‰‹é †ã¯ã‚ã‚‹ã‹ã€‚' },
                    { code: 'R7', name: 'å¯¾å¤–å¯¾å¿œ', text: 'ãƒ‡ãƒ¼ã‚¿ä¸»ä½“ã‹ã‚‰ã®é–‹ç¤ºãƒ»è¨‚æ­£ãƒ»å‰Šé™¤è«‹æ±‚ï¼ˆã‚ªãƒ—ãƒˆã‚¢ã‚¦ãƒˆå«ã‚€ï¼‰ã«å¯¾å¿œã™ã‚‹æ‰‹é †ã¨ä½“åˆ¶ã¯ç¢ºç«‹ã—ã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R8', name: 'æ”¹å–„ãƒ»æ˜¯æ­£', text: 'ãƒ‡ãƒ¼ã‚¿å–ã‚Šæ‰±ã„ã«é–¢ã™ã‚‹ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚„æ³•ä»¤æ”¹æ­£ã«åŸºã¥ãã€ã‚¬ãƒãƒŠãƒ³ã‚¹ä½“åˆ¶ã‚’ç¶™ç¶šçš„ã«æ”¹å–„ã—ã¦ã„ã‚‹ã‹ã€‚' }
                ]
            },
            {
                id: '03', name: 'é€æ˜æ€§', nameEn: 'Transparency', icon: 'â—‡',
                color: '#00ff88',
                desc: 'AIåˆ©ç”¨ã®é–‹ç¤ºã¨èƒ½åŠ›ãƒ»é™ç•Œã®é©åˆ‡ãªèª¬æ˜',
                processes: [
                    { code: 'R1', name: 'æ–¹é‡ãƒ»è²¬ä»»', text: 'AIã®åˆ©ç”¨ç›®çš„ã€èƒ½åŠ›ã®é™ç•Œã€å‰ææ¡ä»¶ã‚’åˆ©ç”¨è€…ã¸é–‹ç¤ºã™ã‚‹æ–¹é‡ãŒå®šã‚ã‚‰ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R2', name: 'ãƒªã‚¹ã‚¯è©•ä¾¡', text: 'é€æ˜æ€§ã®æ¬ å¦‚ãŒåˆ©ç”¨è€…ã®èª¤è§£ã‚„èª¤ç”¨ã‚’æ‹›ããƒªã‚¹ã‚¯ã‚’è©•ä¾¡ã—ã€é–‹ç¤ºã™ã¹ãæƒ…å ±ãƒ¬ãƒ™ãƒ«ã‚’å®šç¾©ã—ã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R3', name: 'è¨­è¨ˆãƒ»æ¤œè¨¼', text: 'åˆ©ç”¨è€…ãŒã€ŒAIã¨å¯¾è©±ã—ã¦ã„ã‚‹ã“ã¨ã€ã‚’èªè­˜ã§ãã‚‹UI/UXãŒè¨­è¨ˆã•ã‚Œã€èª¤èªé˜²æ­¢ãŒæ¤œè¨¼ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R4', name: 'è³‡ç”£ãƒ»ãƒ­ã‚°', text: 'åˆ©ç”¨è€…ã«å¯¾ã—ã¦ã„ã¤ã€ã©ã®ã‚ˆã†ãªæƒ…å ±ã‚’é–‹ç¤ºãƒ»èª¬æ˜ã—ãŸã‹ã®è¨˜éŒ²ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†å«ã‚€ï¼‰ã‚’ä¿å…¨ã—ã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R5', name: 'ç›£è¦–ãƒ»æ¤œçŸ¥', text: 'åˆ©ç”¨è€…ã‹ã‚‰ã®ã€Œåˆ†ã‹ã‚Šã«ãã„ã€ã€Œèª¤è§£ã—ãŸã€ã¨ã„ã£ãŸãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚„è‹¦æƒ…ã‚’æ¤œçŸ¥ãƒ»åé›†ã™ã‚‹çª“å£ã¯ã‚ã‚‹ã‹ã€‚' },
                    { code: 'R6', name: 'å°ã˜è¾¼ã‚ãƒ»å¾©æ—§', text: 'AIã®è¡¨ç¤ºå†…å®¹ã«é‡å¤§ãªèª¤ã‚ŠãŒè¦‹ã¤ã‹ã£ãŸå ´åˆã€å³åº§ã«ä¿®æ­£æƒ…å ±ã‚„æ³¨æ„å–šèµ·ã‚’åˆ©ç”¨è€…ã¸é€šçŸ¥ã™ã‚‹æ‰‹é †ã¯ã‚ã‚‹ã‹ã€‚' },
                    { code: 'R7', name: 'å¯¾å¤–å¯¾å¿œ', text: 'ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ï¼ˆé¡§å®¢ã€å–å¼•å…ˆç­‰ï¼‰ã«å¯¾ã—ã€AIã‚·ã‚¹ãƒ†ãƒ ã®æ¦‚è¦ã‚„ãƒªã‚¹ã‚¯æƒ…å ±ã‚’é©åˆ‡ã«é–‹ç¤ºãƒ»èª¬æ˜ã§ãã‚‹ã‹ã€‚' },
                    { code: 'R8', name: 'æ”¹å–„ãƒ»æ˜¯æ­£', text: 'åˆ©ç”¨è€…ã®ç†è§£åº¦èª¿æŸ»ã‚„èª¤ç”¨äº‹ä¾‹ã«åŸºã¥ãã€èª¬æ˜å†…å®¹ã‚„UIã®æ”¹å–„ã‚’ç¶™ç¶šçš„ã«è¡Œã£ã¦ã„ã‚‹ã‹ã€‚' }
                ]
            },
            {
                id: '04', name: 'å…¬å¹³æ€§', nameEn: 'Fairness', icon: 'âš–',
                color: '#0066ff',
                desc: 'å·®åˆ¥ãƒ»ãƒã‚¤ã‚¢ã‚¹ã®é˜²æ­¢ã¨å…¬å¹³ãªåˆ¤æ–­ã®ç¢ºä¿',
                processes: [
                    { code: 'R1', name: 'æ–¹é‡ãƒ»è²¬ä»»', text: 'AIã«ã‚ˆã‚‹å·®åˆ¥ï¼ˆç‰¹å®šã®å±æ€§ã¸ã®ä¸åˆ©ç›Šãªæ‰±ã„ï¼‰ã‚’ç¦æ­¢ã™ã‚‹æ–¹é‡ã¨ã€å…¬å¹³æ€§ã®å®šç¾©ãƒ»æŒ‡æ¨™ãŒæ˜ç¢ºåŒ–ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R2', name: 'ãƒªã‚¹ã‚¯è©•ä¾¡', text: 'å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«å«ã¾ã‚Œã‚‹ãƒã‚¤ã‚¢ã‚¹ãŒã‚‚ãŸã‚‰ã™å·®åˆ¥çš„å½±éŸ¿ã®ãƒªã‚¹ã‚¯ã‚’è©•ä¾¡ã—ã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R3', name: 'è¨­è¨ˆãƒ»æ¤œè¨¼', text: 'ãƒªãƒªãƒ¼ã‚¹å‰ã«ã€å®šç¾©ã—ãŸå…¬å¹³æ€§æŒ‡æ¨™ã«åŸºã¥ã„ãŸãƒã‚¤ã‚¢ã‚¹æ¤œçŸ¥ãƒ†ã‚¹ãƒˆã‚„ç·©å’Œæªç½®ã®æœ‰åŠ¹æ€§æ¤œè¨¼ã‚’è¡Œã£ã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R4', name: 'è³‡ç”£ãƒ»ãƒ­ã‚°', text: 'å…¬å¹³æ€§æ¤œè¨¼ã«ä½¿ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã€è©•ä¾¡æŒ‡æ¨™ã€ãƒ†ã‚¹ãƒˆçµæœã®è¨˜éŒ²ãŒä¿å…¨ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R5', name: 'ç›£è¦–ãƒ»æ¤œçŸ¥', text: 'é‹ç”¨ä¸­ã®AIå‡ºåŠ›ã«ç‰¹å®šã®å±¤ã¸ã®åã‚ŠãŒç”Ÿã˜ã¦ã„ãªã„ã‹ã€ç¶™ç¶šçš„ã«ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã—ã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R6', name: 'å°ã˜è¾¼ã‚ãƒ»å¾©æ—§', text: 'å·®åˆ¥çš„ãªå‡ºåŠ›ãŒæ¤œçŸ¥ã•ã‚ŒãŸå ´åˆã€å½“è©²ãƒ¢ãƒ‡ãƒ«ã®åˆ©ç”¨åœæ­¢ã‚„ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’è¡Œã†æ‰‹é †ã¯ã‚ã‚‹ã‹ã€‚' },
                    { code: 'R7', name: 'å¯¾å¤–å¯¾å¿œ', text: 'AIã®åˆ¤æ–­ã«ã‚ˆã£ã¦ä¸åˆ©ç›Šã‚’è¢«ã£ãŸã¨æ„Ÿã˜ãŸåˆ©ç”¨è€…ã‹ã‚‰ã®ç”³ç«‹ã¦ã‚’å—ã‘ä»˜ã‘ã€æ•‘æ¸ˆã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã¯ã‚ã‚‹ã‹ã€‚' },
                    { code: 'R8', name: 'æ”¹å–„ãƒ»æ˜¯æ­£', text: 'ãƒã‚¤ã‚¢ã‚¹æ¤œçŸ¥ã®çµæœã‚„ç”³ç«‹ã¦å†…å®¹ã«åŸºã¥ãã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®è¦‹ç›´ã—ã‚„ãƒ¢ãƒ‡ãƒ«ã®å†å­¦ç¿’ã‚’å®Ÿæ–½ã—ã¦ã„ã‚‹ã‹ã€‚' }
                ]
            },
            {
                id: '05', name: 'å®‰å…¨æ€§', nameEn: 'Safety', icon: 'ğŸ›¡',
                color: '#ff6600',
                desc: 'AIã‚·ã‚¹ãƒ†ãƒ ã«å¯¾ã™ã‚‹æ”»æ’ƒå¯¾ç­–ã¨å …ç‰¢æ€§ã®ç¢ºä¿',
                processes: [
                    { code: 'R1', name: 'æ–¹é‡ãƒ»è²¬ä»»', text: 'AIã‚·ã‚¹ãƒ†ãƒ å›ºæœ‰ã®è„…å¨ï¼ˆæ•µå¯¾çš„æ”»æ’ƒã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ³¨å…¥ç­‰ï¼‰ã‚’å«ã‚€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–åŸºæº–ãŒè¦å®šã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R2', name: 'ãƒªã‚¹ã‚¯è©•ä¾¡', text: 'AIã«å¯¾ã™ã‚‹æ”»æ’ƒã‚„æ‚ªç”¨ãŒäº‹æ¥­ã‚„åˆ©ç”¨è€…ã«ä¸ãˆã‚‹å½±éŸ¿åº¦ï¼ˆã‚»ãƒ¼ãƒ•ãƒ†ã‚£ãƒªã‚¹ã‚¯å«ã‚€ï¼‰ã‚’è©•ä¾¡ãƒ»åˆ†é¡ã—ã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R3', name: 'è¨­è¨ˆãƒ»æ¤œè¨¼', text: 'ãƒ¢ãƒ‡ãƒ«ã®å …ç‰¢æ€§ï¼ˆãƒ­ãƒã‚¹ãƒˆãƒã‚¹ï¼‰æ¤œè¨¼ã‚„ãƒ¬ãƒƒãƒ‰ãƒãƒ¼ãƒŸãƒ³ã‚°ã‚’å®Ÿæ–½ã—ã€ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«æ©Ÿèƒ½ã®å®ŸåŠ¹æ€§ã‚’ç¢ºèªã—ã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R4', name: 'è³‡ç”£ãƒ»ãƒ­ã‚°', text: 'AIãƒ¢ãƒ‡ãƒ«ã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ç­‰ã®é‡è¦è³‡ç”£ãŒå°å¸³ç®¡ç†ã•ã‚Œã€æ”¹ã–ã‚“æ¤œçŸ¥ã‚„ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ãŒãƒ­ã‚°ã§æ‹…ä¿ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R5', name: 'ç›£è¦–ãƒ»æ¤œçŸ¥', text: 'AIã¸ã®ç•°å¸¸ãªå…¥åŠ›ï¼ˆæ”»æ’ƒçš„ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç­‰ï¼‰ã‚„ä¸æ­£ãªæŒ™å‹•ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ¤œçŸ¥ã™ã‚‹ä»•çµ„ã¿ã¯ã‚ã‚‹ã‹ã€‚' },
                    { code: 'R6', name: 'å°ã˜è¾¼ã‚ãƒ»å¾©æ—§', text: 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç™ºç”Ÿæ™‚ã®ã‚·ã‚¹ãƒ†ãƒ éš”é›¢ã€è¢«å®³æ‹¡å¤§é˜²æ­¢ã€å®‰å…¨ãªå¾©æ—§æ‰‹é †ãŒç¢ºç«‹ã—ã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R7', name: 'å¯¾å¤–å¯¾å¿œ', text: 'æ”»æ’ƒã«ã‚ˆã‚‹æƒ…å ±æ¼ãˆã„ã‚„ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢ãŒç™ºç”Ÿã—ãŸéš›ã€é–¢ä¿‚å½“å±€ã‚„è¢«å®³è€…ã¸ã®é€šçŸ¥ãƒ•ãƒ­ãƒ¼ã¯æ•´å‚™ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R8', name: 'æ”¹å–„ãƒ»æ˜¯æ­£', text: 'æ–°ãŸãªæ”»æ’ƒæ‰‹æ³•ã‚„ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆåˆ†æã«åŸºã¥ãã€é˜²å¾¡ãƒ¢ãƒ‡ãƒ«ã‚„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ã‚’è¿…é€Ÿã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦ã„ã‚‹ã‹ã€‚' }
                ]
            },
            {
                id: '06', name: 'èª¬æ˜è²¬ä»»', nameEn: 'Accountability', icon: 'ğŸ“‹',
                color: '#ffcc00',
                desc: 'å½¹å‰²ã¨è²¬ä»»ã®æ˜ç¢ºåŒ–ãŠã‚ˆã³åˆ¤æ–­æ ¹æ‹ ã®èª¬æ˜èƒ½åŠ›',
                processes: [
                    { code: 'R1', name: 'æ–¹é‡ãƒ»è²¬ä»»', text: 'AIã‚·ã‚¹ãƒ†ãƒ ã«é–¢ã‚ã‚‹é–‹ç™ºè€…ã€æä¾›è€…ã€åˆ©ç”¨è€…ã®å½¹å‰²ã¨è²¬ä»»åˆ†ç•Œç‚¹ãŒæ˜ç¢ºã«å®šç¾©ãƒ»æ–‡æ›¸åŒ–ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R2', name: 'ãƒªã‚¹ã‚¯è©•ä¾¡', text: 'AIã®åˆ¤æ–­çµæœã«å¯¾ã™ã‚‹èª¬æ˜ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ãƒ¬ãƒ™ãƒ«ï¼ˆé‡å¤§åº¦ï¼‰ã«å¿œã˜ã€å¿…è¦ãªèª¬æ˜èƒ½åŠ›ã‚’å®šç¾©ãƒ»è©•ä¾¡ã—ã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R3', name: 'è¨­è¨ˆãƒ»æ¤œè¨¼', text: 'AIã®æ¨è«–çµæœã®æ ¹æ‹ ï¼ˆç‰¹å¾´é‡ã®å¯„ä¸åº¦ç­‰ï¼‰ã‚’æç¤ºã™ã‚‹æŠ€è¡“ï¼ˆXAIï¼‰ã‚„æ‰‹æ³•ãŒå°å…¥ãƒ»æ¤œè¨¼ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R4', name: 'è³‡ç”£ãƒ»ãƒ­ã‚°', text: 'å€‹åˆ¥ã®åˆ¤æ–­çµæœã«ã¤ã„ã¦ã€ã€Œãªãœãã®çµè«–ã«è‡³ã£ãŸã‹ã€ã‚’äº‹å¾Œçš„ã«è¿½è·¡ãƒ»èª¬æ˜ã§ãã‚‹è¨¼è·¡ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R5', name: 'ç›£è¦–ãƒ»æ¤œçŸ¥', text: 'èª¬æ˜ãŒå›°é›£ãªæŒ™å‹•ã‚„ã€è²¬ä»»ã®æ‰€åœ¨ãŒæ›–æ˜§ã«ãªã‚Šã†ã‚‹çŠ¶æ³ã‚’æ¤œçŸ¥ã™ã‚‹ä»•çµ„ã¿ã¯ã‚ã‚‹ã‹ã€‚' },
                    { code: 'R6', name: 'å°ã˜è¾¼ã‚ãƒ»å¾©æ—§', text: 'è²¬ä»»è¿½åŠãŒç™ºç”Ÿã—ãŸéš›ã®å¯¾å¿œãƒãƒ¼ãƒ çµ„æˆæ‰‹é †ã¯ã‚ã‚‹ã‹ã€‚' },
                    { code: 'R7', name: 'å¯¾å¤–å¯¾å¿œ', text: 'AIã®åˆ¤æ–­çµæœã«ã¤ã„ã¦ç›£æŸ»äººã‚„å½“å±€ã‹ã‚‰èª¬æ˜ã‚’æ±‚ã‚ã‚‰ã‚ŒãŸéš›ã€åˆç†çš„ãªæ ¹æ‹ ã«åŸºã¥ãå›ç­”ã§ãã‚‹ä½“åˆ¶ãŒã‚ã‚‹ã‹ã€‚' },
                    { code: 'R8', name: 'æ”¹å–„ãƒ»æ˜¯æ­£', text: 'èª¬æ˜è²¬ä»»ã‚’æœãŸã›ãªã‹ã£ãŸäº‹ä¾‹ã«åŸºã¥ãã€è¨˜éŒ²ãƒ—ãƒ­ã‚»ã‚¹ã‚„è²¬ä»»åˆ†ç•Œç‚¹ã®è¦‹ç›´ã—ã‚’è¡Œã£ã¦ã„ã‚‹ã‹ã€‚' }
                ]
            },
            {
                id: '07', name: 'ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹', nameEn: 'Compliance', icon: 'âš™',
                color: '#cc00ff',
                desc: 'æ³•ä»¤éµå®ˆã¨å†…éƒ¨çµ±åˆ¶ã®ç¢ºä¿',
                processes: [
                    { code: 'R1', name: 'æ–¹é‡ãƒ»è²¬ä»»', text: 'AIåˆ©æ´»ç”¨ã«é–¢ã™ã‚‹å…¨ç¤¾çš„ãªåŸºæœ¬æ–¹é‡ã€é©ç”¨æ³•ä»¤ã€å†…éƒ¨è¦ç¨‹ä½“ç³»ãŒæ•´å‚™ãƒ»å‘¨çŸ¥ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R2', name: 'ãƒªã‚¹ã‚¯è©•ä¾¡', text: 'é©ç”¨ã•ã‚Œã‚‹æ³•ä»¤ãƒ»è¦åˆ¶ï¼ˆè‘—ä½œæ¨©æ³•ã€å€‹äººæƒ…å ±ä¿è­·æ³•ã€æ¥­æ³•ç­‰ï¼‰åŠã³å¥‘ç´„ä¸Šã®ç¾©å‹™é•åãƒªã‚¹ã‚¯ã‚’ç‰¹å®šãƒ»è©•ä¾¡ã—ã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R3', name: 'è¨­è¨ˆãƒ»æ¤œè¨¼', text: 'å¤–éƒ¨å§”è¨—å…ˆã‚„åˆ©ç”¨ã™ã‚‹SaaSã®é¸å®šåŸºæº–ã«AIã‚¬ãƒãƒŠãƒ³ã‚¹è¦ä»¶ãŒå«ã¾ã‚Œã€å¥‘ç´„å‰ã«æ¤œè¨¼ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R4', name: 'è³‡ç”£ãƒ»ãƒ­ã‚°', text: 'ã‚¬ãƒãƒŠãƒ³ã‚¹æ´»å‹•ã®è¨˜éŒ²ï¼ˆä¼šè­°è­°äº‹éŒ²ã€æ‰¿èªè¨˜éŒ²ã€ç›£æŸ»å ±å‘Šæ›¸ç­‰ï¼‰ãŒé©åˆ‡ã«ä¿ç®¡ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R5', name: 'ç›£è¦–ãƒ»æ¤œçŸ¥', text: 'æ³•ä»¤é•åã‚„å†…éƒ¨è¦ç¨‹é•åã®äºˆå…†ã‚’æ¤œçŸ¥ã™ã‚‹å†…éƒ¨é€šå ±åˆ¶åº¦ã‚„ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ä½“åˆ¶ã¯æ©Ÿèƒ½ã—ã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R6', name: 'å°ã˜è¾¼ã‚ãƒ»å¾©æ—§', text: 'é‡å¤§ãªã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹é•åãŒç™ºè¦šã—ãŸéš›ã®å³æ™‚å ±å‘Šãƒ«ãƒ¼ãƒˆã¨ç·Šæ€¥å¯¾å¿œä½“åˆ¶ã¯æ•´å‚™ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R7', name: 'å¯¾å¤–å¯¾å¿œ', text: 'è¦åˆ¶å½“å±€ã¸ã®å ±å‘Šç¾©å‹™ã‚„ã€å¤–éƒ¨ç›£æŸ»ã¸ã®å¯¾å¿œæ‰‹é †ãŒæ˜ç¢ºåŒ–ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R8', name: 'æ”¹å–„ãƒ»æ˜¯æ­£', text: 'å®šæœŸçš„ãªå†…éƒ¨ç›£æŸ»ã‚„å¤–éƒ¨è©•ä¾¡ã‚’å®Ÿæ–½ã—ã€æŒ‡æ‘˜äº‹é …ã«åŸºã¥ã„ã¦ã‚¬ãƒãƒŠãƒ³ã‚¹ä½“åˆ¶ã‚’ç¶™ç¶šçš„ã«æ”¹å–„ã—ã¦ã„ã‚‹ã‹ã€‚' }
                ]
            },
            {
                id: '08', name: 'ãƒ¡ãƒ³ã‚¿ãƒ«æŒç¶šæ€§', nameEn: 'Mental Sustainability', icon: 'â™¡',
                color: '#00ffcc',
                desc: 'å¾“æ¥­å“¡ãƒ»åˆ©ç”¨è€…ã®å¿ƒç†çš„è² è·ã¸ã®é…æ…®ã¨äººé–“ä¸­å¿ƒã®é‹ç”¨',
                processes: [
                    { code: 'R1', name: 'æ–¹é‡ãƒ»è²¬ä»»', text: 'AIåˆ©æ´»ç”¨ãŒå¾“æ¥­å“¡ã‚„åˆ©ç”¨è€…ã®ç²¾ç¥çš„å¥åº·ã‚’æãªã‚ãªã„ã‚ˆã†ã€äººé–“ä¸­å¿ƒã®é‹ç”¨æ–¹é‡ãŒå®šã‚ã‚‰ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R2', name: 'ãƒªã‚¹ã‚¯è©•ä¾¡', text: 'å¸¸æ™‚æ¥ç¶šã€æƒ…å ±éå¤šã€åˆ¤æ–­ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ç­‰ã€AIãŒäººé–“ã«ä¸ãˆã‚‹å¿ƒç†çš„è² è·ãƒ»ã‚¹ãƒˆãƒ¬ã‚¹ãƒªã‚¹ã‚¯ã‚’è©•ä¾¡ã—ã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R3', name: 'è¨­è¨ˆãƒ»æ¤œè¨¼', text: 'èªçŸ¥è² è·ã‚’ä½æ¸›ã—ã€éåº¦ãªä¾å­˜ã‚„ä¸å®‰ã‚’ç”Ÿã¾ãªã„UI/UXã‚„æ¥­å‹™ãƒ—ãƒ­ã‚»ã‚¹ãŒè¨­è¨ˆãƒ»æ¤œè¨¼ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R4', name: 'è³‡ç”£ãƒ»ãƒ­ã‚°', text: 'AIé–¢é€£æ¥­å‹™ã«å¾“äº‹ã™ã‚‹æ‹…å½“è€…ã®åŠ´åƒæ™‚é–“ã€ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯çµæœç­‰ã®å¥åº·æŒ‡æ¨™ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ã—ã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R5', name: 'ç›£è¦–ãƒ»æ¤œçŸ¥', text: 'é‹ç”¨æ‹…å½“è€…ã®ç‡ƒãˆå°½ãï¼ˆãƒãƒ¼ãƒ³ã‚¢ã‚¦ãƒˆï¼‰ã®å…†å€™ã‚„ã€éåº¦ãªè² æ‹…é›†ä¸­ã‚’æ¤œçŸ¥ã™ã‚‹ä»•çµ„ã¿ã¯ã‚ã‚‹ã‹ã€‚' },
                    { code: 'R6', name: 'å°ã˜è¾¼ã‚ãƒ»å¾©æ—§', text: 'æ‹…å½“è€…ã®ãƒ¡ãƒ³ã‚¿ãƒ«ä¸èª¿ç™ºç”Ÿæ™‚ã«ã€æ¥­å‹™ã‹ã‚‰ä¸€æ™‚çš„ã«é›¢è„±ã•ã›ã€ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä½“åˆ¶ã¯ã‚ã‚‹ã‹ã€‚' },
                    { code: 'R7', name: 'å¯¾å¤–å¯¾å¿œ', text: 'è‡ªç¤¾ã®AIãŒã€åˆ©ç”¨è€…ï¼ˆç‰¹ã«å­ä¾›ã‚„è„†å¼±ãªç«‹å ´ã®äººï¼‰ã®ç²¾ç¥çš„å¥åº·ã«æ‚ªå½±éŸ¿ã‚’ä¸ãˆãªã„é…æ…®ãŒãªã•ã‚Œã¦ã„ã‚‹ã‹ã€‚' },
                    { code: 'R8', name: 'æ”¹å–„ãƒ»æ˜¯æ­£', text: 'å¾“æ¥­å“¡ã‚µãƒ¼ãƒ™ã‚¤ã‚„å¥åº·ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãã€AIã‚’ç”¨ã„ãŸæ¥­å‹™ãƒ•ãƒ­ãƒ¼ã‚„äººå“¡ä½“åˆ¶ã®è¦‹ç›´ã—ã‚’è¡Œã£ã¦ã„ã‚‹ã‹ã€‚' }
                ]
            }
        ];

        // ============ GAME STATE ============
        let gameState = {
            checkedItems: new Set(),
            xp: 0,
            level: 1,
            achievements: [],
            selectedDomain: 0
        };

        // Load saved state
        const savedState = localStorage.getItem('aiGovernanceState');
        if (savedState) {
            const parsed = JSON.parse(savedState);
            gameState.checkedItems = new Set(parsed.checkedItems || []);
            gameState.xp = parsed.xp || 0;
            gameState.level = parsed.level || 1;
            gameState.achievements = parsed.achievements || [];
        }

        // Achievements definition
        const achievements = [
            { id: 'first_check', name: 'First Steps', desc: 'Complete your first checklist item', icon: 'ğŸ¯', xp: 50, condition: () => gameState.checkedItems.size >= 1 },
            { id: 'domain_complete', name: 'Domain Master', desc: 'Complete all items in one domain', icon: 'ğŸ†', xp: 200, condition: () => domainData.some((d, i) => getDomainProgress(i) === 8) },
            { id: 'halfway', name: 'Halfway There', desc: 'Complete 50% of all items', icon: 'â­', xp: 300, condition: () => gameState.checkedItems.size >= 32 },
            { id: 'all_complete', name: 'Governance Master', desc: 'Complete all 64 items', icon: 'ğŸ‘‘', xp: 1000, condition: () => gameState.checkedItems.size >= 64 },
            { id: 'explorer', name: 'Explorer', desc: 'View all 8 domains', icon: 'ğŸ”', xp: 100, condition: () => true }, // Triggered manually
            { id: 'speed_demon', name: 'Speed Demon', desc: 'Complete 10 items in one session', icon: 'âš¡', xp: 150, condition: () => sessionChecks >= 10 },
            { id: 'combo_3', name: 'Hot Streak', desc: 'Get a 3x combo', icon: 'ğŸ”¥', xp: 75, condition: () => quizState.combo >= 3 },
            { id: 'combo_5', name: 'On Fire', desc: 'Get a 5x combo', icon: 'ğŸ’¥', xp: 150, condition: () => quizState.combo >= 5 },
            { id: 'combo_10', name: 'Unstoppable', desc: 'Get a 10x combo', icon: 'ğŸŒŸ', xp: 300, condition: () => quizState.combo >= 10 },
            { id: 'perfect_domain', name: 'Perfect Domain', desc: 'Complete a domain with no wrong answers', icon: 'ğŸ’', xp: 500, condition: () => false } // Special trigger
        ];

        let sessionChecks = 0;
        let viewedDomains = new Set();

        // ============ QUIZ SYSTEM ============
        let quizState = {
            currentDomain: null,
            currentProcess: null,
            selectedAnswer: null,
            combo: 0,
            maxCombo: 0,
            totalCorrect: 0,
            totalAttempts: 0
        };

        // Load quiz state
        const savedQuizState = localStorage.getItem('aiGovernanceQuizState');
        if (savedQuizState) {
            const parsed = JSON.parse(savedQuizState);
            quizState.combo = parsed.combo || 0;
            quizState.maxCombo = parsed.maxCombo || 0;
            quizState.totalCorrect = parsed.totalCorrect || 0;
            quizState.totalAttempts = parsed.totalAttempts || 0;
        }

        // Quiz questions for each domain/process combination
        // Format: { question: string, options: string[], correct: number (0-3) }
        const quizQuestions = {
            // Domain 0: äººé–“ç›£ç£ (Human Oversight)
            '0-0': { // R1 æ–¹é‡ãƒ»è²¬ä»»
                question: 'äººé–“ç›£ç£ã«ãŠã‘ã‚‹ã€Œæ–¹é‡ãƒ»è²¬ä»»ã€ã§æœ€ã‚‚é‡è¦ãªã®ã¯ä½•ã§ã™ã‹ï¼Ÿ',
                options: [
                    'AIã®å‡¦ç†é€Ÿåº¦ã‚’æœ€å¤§åŒ–ã™ã‚‹ã“ã¨',
                    'äººé–“ãŒæœ€çµ‚æ±ºå®šã‚„æ‰¿èªã‚’è¡Œã†ç¯„å›²ãƒ»æ¨©é™ãƒ»è²¬ä»»è€…ã®æ˜ç¢ºãªè¦å®š',
                    'AIã®å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚’å¢—ã‚„ã™ã“ã¨',
                    'ã‚·ã‚¹ãƒ†ãƒ ã®ã‚³ã‚¹ãƒˆã‚’å‰Šæ¸›ã™ã‚‹ã“ã¨'
                ],
                correct: 1
            },
            '0-1': { // R2 ãƒªã‚¹ã‚¯è©•ä¾¡
                question: 'HIC/HITLã¨ã¯ä½•ã‚’æŒ‡ã—ã¾ã™ã‹ï¼Ÿ',
                options: [
                    'AIè‡ªå‹•åŒ–ã®æŠ€è¡“ç”¨èª',
                    'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ç¨®é¡',
                    'äººé–“ã®ä»‹å…¥ãƒ»ãƒ«ãƒ¼ãƒ—å†…äººé–“ï¼ˆHuman-In-Command/Human-In-The-Loopï¼‰',
                    'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª'
                ],
                correct: 2
            },
            '0-2': { // R3 è¨­è¨ˆãƒ»æ¤œè¨¼
                question: 'ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰æ©Ÿèƒ½ã®ç›®çš„ã¯ä½•ã§ã™ã‹ï¼Ÿ',
                options: [
                    'AIã®é€Ÿåº¦ã‚’ä¸Šã’ã‚‹',
                    'ãƒ‡ãƒ¼ã‚¿ã‚’æš—å·åŒ–ã™ã‚‹',
                    'ç•°å¸¸æ™‚ã«äººé–“ãŒAIã®åˆ¤æ–­ã‚’ä¸Šæ›¸ãã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹',
                    'ã‚³ã‚¹ãƒˆã‚’å‰Šæ¸›ã™ã‚‹'
                ],
                correct: 2
            },
            '0-3': { // R4 è³‡ç”£ãƒ»ãƒ­ã‚°
                question: 'ç›£æŸ»è¨¼è·¡ã¨ã—ã¦ä¿å…¨ã™ã¹ãè¨˜éŒ²ã¯ï¼Ÿ',
                options: [
                    'AIã®å‡¦ç†æ™‚é–“ã®ã¿',
                    'äººé–“ã«ã‚ˆã‚‹æ‰¿èªã€ä»‹å…¥ã€ä¸Šæ›¸ãæ“ä½œã®è¨˜éŒ²',
                    'ã‚µãƒ¼ãƒãƒ¼ã®é›»åŠ›æ¶ˆè²»é‡',
                    'ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¹´é½¢æƒ…å ±'
                ],
                correct: 1
            },
            '0-4': { // R5 ç›£è¦–ãƒ»æ¤œçŸ¥
                question: 'AIã®æš´èµ°ã®å…†å€™ã‚’æ¤œçŸ¥ã—ãŸéš›ã€æœ€åˆã«ã™ã¹ãã“ã¨ã¯ï¼Ÿ',
                options: [
                    'ãƒ­ã‚°ã‚’å‰Šé™¤ã™ã‚‹',
                    'ç›£ç£è€…ã¸å³åº§ã«é€šçŸ¥ã™ã‚‹',
                    'AIã®å­¦ç¿’ã‚’ç¶™ç¶šã™ã‚‹',
                    'ä½•ã‚‚ã—ãªã„'
                ],
                correct: 1
            },
            '0-5': { // R6 å°ã˜è¾¼ã‚ãƒ»å¾©æ—§
                question: 'AIã‚’åœæ­¢ã•ã›ãŸå¾Œã«å¿…è¦ãªæ‰‹é †ã¯ï¼Ÿ',
                options: [
                    'ã™ãã«AIã‚’å†èµ·å‹•ã™ã‚‹',
                    'ãƒ‡ãƒ¼ã‚¿ã‚’å…¨ã¦å‰Šé™¤ã™ã‚‹',
                    'æ‰‹å‹•æ¥­å‹™ã¸ã®åˆ‡ã‚Šæ›¿ãˆã‚„å®‰å…¨ãªå¾©æ—§æ‰‹é †',
                    'æ–°ã—ã„AIã‚’è³¼å…¥ã™ã‚‹'
                ],
                correct: 2
            },
            '0-6': { // R7 å¯¾å¤–å¯¾å¿œ
                question: 'åˆ©ç”¨è€…ã¸ã®èª¬æ˜ã§é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã¯ï¼Ÿ',
                options: [
                    'AIã®æŠ€è¡“çš„è©³ç´°ã‚’ã™ã¹ã¦é–‹ç¤ºã™ã‚‹',
                    'é‡è¦ãªæ±ºå®šã«äººé–“ãŒé–¢ä¸ã—ã¦ã„ã‚‹äº‹å®Ÿã‚’é©åˆ‡ã«èª¬æ˜ã™ã‚‹',
                    'ã‚³ã‚¹ãƒˆã®å†…è¨³ã‚’å…¬é–‹ã™ã‚‹',
                    'ç«¶åˆä»–ç¤¾ã®æƒ…å ±ã‚’å…±æœ‰ã™ã‚‹'
                ],
                correct: 1
            },
            '0-7': { // R8 æ”¹å–„ãƒ»æ˜¯æ­£
                question: 'ç›£ç£ä½“åˆ¶ã®æ”¹å–„ã«å¿…è¦ãªãƒ—ãƒ­ã‚»ã‚¹ã¯ï¼Ÿ',
                options: [
                    'ãƒ’ãƒ¤ãƒªãƒãƒƒãƒˆäº‹ä¾‹ã®åˆ†æã¨ä»‹å…¥åŸºæº–ã®è¦‹ç›´ã—',
                    'AIã®å‡¦ç†èƒ½åŠ›ã‚’å¢—å¼·ã™ã‚‹',
                    'ã‚¹ã‚¿ãƒƒãƒ•ã‚’å‰Šæ¸›ã™ã‚‹',
                    'å ±å‘Šæ›¸ã‚’éš è”½ã™ã‚‹'
                ],
                correct: 0
            },

            // Domain 1: ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ (Privacy)
            '1-0': { // R1 æ–¹é‡ãƒ»è²¬ä»»
                question: 'å€‹äººæƒ…å ±ä¿è­·æ–¹é‡ã§å®šã‚ã‚‹ã¹ãåŸå‰‡ã¯ï¼Ÿ',
                options: [
                    'ãƒ‡ãƒ¼ã‚¿ã®æœ€å¤§åŒ–åŸå‰‡',
                    'ãƒ‡ãƒ¼ã‚¿ã®ç›®çš„å¤–åˆ©ç”¨ç¦æ­¢ã€æœ€å°åŒ–ã®åŸå‰‡',
                    'ãƒ‡ãƒ¼ã‚¿ã®ç„¡åˆ¶é™å…±æœ‰',
                    'ãƒ‡ãƒ¼ã‚¿ã®é•·æœŸä¿å­˜ç¾©å‹™'
                ],
                correct: 1
            },
            '1-1': { // R2 ãƒªã‚¹ã‚¯è©•ä¾¡
                question: 'PIAã¨ã¯ä½•ã®ç•¥ç§°ã§ã™ã‹ï¼Ÿ',
                options: [
                    'Personal Information Archive',
                    'Privacy Impact Assessmentï¼ˆãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼å½±éŸ¿è©•ä¾¡ï¼‰',
                    'Private Internet Access',
                    'Public Information Act'
                ],
                correct: 1
            },
            '1-2': { // R3 è¨­è¨ˆãƒ»æ¤œè¨¼
                question: 'ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·æŠ€è¡“ã¨ã—ã¦é©åˆ‡ãªã‚‚ã®ã¯ï¼Ÿ',
                options: [
                    'ãƒ‡ãƒ¼ã‚¿ã®å…¬é–‹å…±æœ‰',
                    'åŒ¿ååŒ–ã€ç§˜å¯†è¨ˆç®—ç­‰ã®æŠ€è¡“',
                    'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å‰Šé™¤',
                    'ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™ã®æ’¤å»ƒ'
                ],
                correct: 1
            },
            '1-3': { // R4 è³‡ç”£ãƒ»ãƒ­ã‚°
                question: 'ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆç®¡ç†ã§ä¿å…¨ã™ã¹ãè¨˜éŒ²ã¯ï¼Ÿ',
                options: [
                    'åˆ©ç”¨å±¥æ­´ã€ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ã€å‰Šé™¤è¨˜éŒ²',
                    'AIã®äºˆæ¸¬ç²¾åº¦ã®ã¿',
                    'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°è³‡æ–™',
                    'ç«¶åˆä»–ç¤¾ã®æƒ…å ±'
                ],
                correct: 0
            },
            '1-4': { // R5 ç›£è¦–ãƒ»æ¤œçŸ¥
                question: 'æ¤œçŸ¥ã™ã¹ãç•°å¸¸ãªè¡Œå‹•ã¯ï¼Ÿ',
                options: [
                    'é€šå¸¸ã®ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹',
                    'ç›®çš„å¤–ã®ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã‚„ç•°å¸¸ãªãƒ‡ãƒ¼ã‚¿æŒã¡å‡ºã—',
                    'ãƒ­ã‚°ã‚¤ãƒ³ã®æˆåŠŸ',
                    'å®šæœŸçš„ãªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—'
                ],
                correct: 1
            },
            '1-5': { // R6 å°ã˜è¾¼ã‚ãƒ»å¾©æ—§
                question: 'ãƒ‡ãƒ¼ã‚¿æ¼ãˆã„ç™ºç”Ÿæ™‚ã®æœ€åˆã®å¯¾å¿œã¯ï¼Ÿ',
                options: [
                    'å ±å‘Šã‚’é…å»¶ã•ã›ã‚‹',
                    'å¯¾è±¡ãƒ‡ãƒ¼ã‚¿ã®éš”é›¢ã‚„ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã®åœæ­¢',
                    'ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã§å…¬é–‹ã™ã‚‹',
                    'ä½•ã‚‚ã—ãªã„'
                ],
                correct: 1
            },
            '1-6': { // R7 å¯¾å¤–å¯¾å¿œ
                question: 'ãƒ‡ãƒ¼ã‚¿ä¸»ä½“ã‹ã‚‰ã®è«‹æ±‚ã§å¯¾å¿œã™ã¹ãã‚‚ã®ã¯ï¼Ÿ',
                options: [
                    'é–‹ç¤ºãƒ»è¨‚æ­£ãƒ»å‰Šé™¤è«‹æ±‚ï¼ˆã‚ªãƒ—ãƒˆã‚¢ã‚¦ãƒˆå«ã‚€ï¼‰',
                    'ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ åé›†è¦æ±‚',
                    'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ãƒ¡ãƒ¼ãƒ«ã®é€ä¿¡',
                    'ç«¶åˆä»–ç¤¾ã¸ã®æƒ…å ±æä¾›'
                ],
                correct: 0
            },
            '1-7': { // R8 æ”¹å–„ãƒ»æ˜¯æ­£
                question: 'ã‚¬ãƒãƒŠãƒ³ã‚¹ä½“åˆ¶ã®æ”¹å–„ãƒˆãƒªã‚¬ãƒ¼ã¯ï¼Ÿ',
                options: [
                    'å£²ä¸Šã®å¢—åŠ ',
                    'ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚„æ³•ä»¤æ”¹æ­£',
                    'AIã®å‡¦ç†é€Ÿåº¦å‘ä¸Š',
                    'å¾“æ¥­å“¡æ•°ã®å¤‰åŒ–'
                ],
                correct: 1
            },

            // Domain 2: é€æ˜æ€§ (Transparency)
            '2-0': { // R1 æ–¹é‡ãƒ»è²¬ä»»
                question: 'é€æ˜æ€§ã®æ–¹é‡ã§é–‹ç¤ºã™ã¹ãæƒ…å ±ã¯ï¼Ÿ',
                options: [
                    'ä¼æ¥­ã®è²¡å‹™æƒ…å ±ã®ã¿',
                    'AIã®åˆ©ç”¨ç›®çš„ã€èƒ½åŠ›ã®é™ç•Œã€å‰ææ¡ä»¶',
                    'ç«¶åˆä»–ç¤¾ã®æˆ¦ç•¥',
                    'å¾“æ¥­å“¡ã®å€‹äººæƒ…å ±'
                ],
                correct: 1
            },
            '2-1': { // R2 ãƒªã‚¹ã‚¯è©•ä¾¡
                question: 'é€æ˜æ€§ã®æ¬ å¦‚ãŒã‚‚ãŸã‚‰ã™ãƒªã‚¹ã‚¯ã¯ï¼Ÿ',
                options: [
                    'ã‚³ã‚¹ãƒˆã®å¢—åŠ ',
                    'åˆ©ç”¨è€…ã®èª¤è§£ã‚„èª¤ç”¨',
                    'ã‚µãƒ¼ãƒãƒ¼ã®æ•…éšœ',
                    'å¾“æ¥­å“¡ã®é›¢è·'
                ],
                correct: 1
            },
            '2-2': { // R3 è¨­è¨ˆãƒ»æ¤œè¨¼
                question: 'é€æ˜æ€§ã‚’ç¢ºä¿ã™ã‚‹UI/UXã®è¦ä»¶ã¯ï¼Ÿ',
                options: [
                    'ã§ãã‚‹ã ã‘æƒ…å ±ã‚’éš ã™',
                    'åˆ©ç”¨è€…ãŒAIã¨å¯¾è©±ã—ã¦ã„ã‚‹ã“ã¨ã‚’èªè­˜ã§ãã‚‹è¨­è¨ˆ',
                    'ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’è‡ªå‹•åŒ–ã™ã‚‹',
                    'ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’åˆ¶é™ã™ã‚‹'
                ],
                correct: 1
            },
            '2-3': { // R4 è³‡ç”£ãƒ»ãƒ­ã‚°
                question: 'é€æ˜æ€§ã«é–¢ã—ã¦ä¿å…¨ã™ã¹ãè¨˜éŒ²ã¯ï¼Ÿ',
                options: [
                    'AIã®é›»åŠ›æ¶ˆè²»é‡',
                    'åˆ©ç”¨è€…ã¸ã®æƒ…å ±é–‹ç¤ºãƒ»èª¬æ˜ã®è¨˜éŒ²ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†å«ã‚€ï¼‰',
                    'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã®çµæœ',
                    'ã‚µãƒ¼ãƒãƒ¼ã®ç¨¼åƒæ™‚é–“'
                ],
                correct: 1
            },
            '2-4': { // R5 ç›£è¦–ãƒ»æ¤œçŸ¥
                question: 'åé›†ã™ã¹ããƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®ç¨®é¡ã¯ï¼Ÿ',
                options: [
                    'è³¼è²·å±¥æ­´ã®ã¿',
                    'ã€Œåˆ†ã‹ã‚Šã«ãã„ã€ã€Œèª¤è§£ã—ãŸã€ã¨ã„ã£ãŸè‹¦æƒ…',
                    'SNSã®ã„ã„ã­æ•°',
                    'ç«¶åˆä»–ç¤¾ã®è©•ä¾¡'
                ],
                correct: 1
            },
            '2-5': { // R6 å°ã˜è¾¼ã‚ãƒ»å¾©æ—§
                question: 'AIã®è¡¨ç¤ºã«é‡å¤§ãªèª¤ã‚ŠãŒè¦‹ã¤ã‹ã£ãŸå ´åˆã®å¯¾å¿œã¯ï¼Ÿ',
                options: [
                    'èª¤ã‚Šã‚’éš è”½ã™ã‚‹',
                    'å³åº§ã«ä¿®æ­£æƒ…å ±ã‚„æ³¨æ„å–šèµ·ã‚’åˆ©ç”¨è€…ã¸é€šçŸ¥ã™ã‚‹',
                    'ä½•ã‚‚ã—ãªã„',
                    'ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ°¸ä¹…åœæ­¢ã™ã‚‹'
                ],
                correct: 1
            },
            '2-6': { // R7 å¯¾å¤–å¯¾å¿œ
                question: 'ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã¸ã®é–‹ç¤ºã§é‡è¦ãªã®ã¯ï¼Ÿ',
                options: [
                    'æŠ€è¡“çš„ãªè©³ç´°ã®ã¿',
                    'AIã‚·ã‚¹ãƒ†ãƒ ã®æ¦‚è¦ã‚„ãƒªã‚¹ã‚¯æƒ…å ±ã®é©åˆ‡ãªèª¬æ˜',
                    'è²¡å‹™æƒ…å ±ã®å…¨å…¬é–‹',
                    'å¾“æ¥­å“¡ã®è©•ä¾¡æƒ…å ±'
                ],
                correct: 1
            },
            '2-7': { // R8 æ”¹å–„ãƒ»æ˜¯æ­£
                question: 'èª¬æ˜å†…å®¹ã‚„UIã®æ”¹å–„ã«å¿…è¦ãªã®ã¯ï¼Ÿ',
                options: [
                    'ç«¶åˆä»–ç¤¾ã®ã‚³ãƒ”ãƒ¼',
                    'åˆ©ç”¨è€…ã®ç†è§£åº¦èª¿æŸ»ã‚„èª¤ç”¨äº‹ä¾‹ã«åŸºã¥ãç¶™ç¶šçš„æ”¹å–„',
                    'ã‚³ã‚¹ãƒˆå‰Šæ¸›ã®ã¿',
                    'æ©Ÿèƒ½ã®å‰Šé™¤'
                ],
                correct: 1
            },

            // Domain 3: å…¬å¹³æ€§ (Fairness)
            '3-0': { // R1 æ–¹é‡ãƒ»è²¬ä»»
                question: 'å…¬å¹³æ€§ã®æ–¹é‡ã§ç¦æ­¢ã™ã¹ãã“ã¨ã¯ï¼Ÿ',
                options: [
                    'AIã®åˆ©ç”¨è‡ªä½“',
                    'AIã«ã‚ˆã‚‹å·®åˆ¥ï¼ˆç‰¹å®šã®å±æ€§ã¸ã®ä¸åˆ©ç›Šãªæ‰±ã„ï¼‰',
                    'ãƒ‡ãƒ¼ã‚¿ã®åé›†',
                    'ã‚·ã‚¹ãƒ†ãƒ ã®æ›´æ–°'
                ],
                correct: 1
            },
            '3-1': { // R2 ãƒªã‚¹ã‚¯è©•ä¾¡
                question: 'ãƒã‚¤ã‚¢ã‚¹ã®è©•ä¾¡å¯¾è±¡ã¯ï¼Ÿ',
                options: [
                    'ã‚µãƒ¼ãƒãƒ¼ã®æ€§èƒ½ã®ã¿',
                    'å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«å«ã¾ã‚Œã‚‹ãƒã‚¤ã‚¢ã‚¹',
                    'ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¹´é½¢å±¤',
                    'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°è²»ç”¨'
                ],
                correct: 1
            },
            '3-2': { // R3 è¨­è¨ˆãƒ»æ¤œè¨¼
                question: 'ãƒªãƒªãƒ¼ã‚¹å‰ã«å®Ÿæ–½ã™ã¹ãæ¤œè¨¼ã¯ï¼Ÿ',
                options: [
                    'å£²ä¸Šäºˆæ¸¬',
                    'å…¬å¹³æ€§æŒ‡æ¨™ã«åŸºã¥ã„ãŸãƒã‚¤ã‚¢ã‚¹æ¤œçŸ¥ãƒ†ã‚¹ãƒˆ',
                    'ã‚³ã‚¹ãƒˆåˆ†æã®ã¿',
                    'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æˆ¦ç•¥ã®ç¢ºèª'
                ],
                correct: 1
            },
            '3-3': { // R4 è³‡ç”£ãƒ»ãƒ­ã‚°
                question: 'å…¬å¹³æ€§æ¤œè¨¼ã§ä¿å…¨ã™ã¹ãè¨˜éŒ²ã¯ï¼Ÿ',
                options: [
                    'æ¤œè¨¼ã«ä½¿ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã€è©•ä¾¡æŒ‡æ¨™ã€ãƒ†ã‚¹ãƒˆçµæœ',
                    'å£²ä¸Šãƒ‡ãƒ¼ã‚¿ã®ã¿',
                    'ç«¶åˆä»–ç¤¾ã®æƒ…å ±',
                    'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°è³‡æ–™'
                ],
                correct: 0
            },
            '3-4': { // R5 ç›£è¦–ãƒ»æ¤œçŸ¥
                question: 'é‹ç”¨ä¸­ã«ç›£è¦–ã™ã¹ãã“ã¨ã¯ï¼Ÿ',
                options: [
                    'ã‚µãƒ¼ãƒãƒ¼ã®é›»åŠ›æ¶ˆè²»',
                    'AIå‡ºåŠ›ã«ç‰¹å®šã®å±¤ã¸ã®åã‚ŠãŒç”Ÿã˜ã¦ã„ãªã„ã‹',
                    'ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ­ã‚°ã‚¤ãƒ³å›æ•°',
                    'å£²ä¸Šã®æ¨ç§»'
                ],
                correct: 1
            },
            '3-5': { // R6 å°ã˜è¾¼ã‚ãƒ»å¾©æ—§
                question: 'å·®åˆ¥çš„ãªå‡ºåŠ›ãŒæ¤œçŸ¥ã•ã‚ŒãŸå ´åˆã®å¯¾å¿œã¯ï¼Ÿ',
                options: [
                    'å ±å‘Šã‚’é…å»¶ã•ã›ã‚‹',
                    'ãƒ¢ãƒ‡ãƒ«ã®åˆ©ç”¨åœæ­¢ã‚„ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯',
                    'å‡ºåŠ›ã‚’ãã®ã¾ã¾ç¶™ç¶š',
                    'ãƒ­ã‚°ã‚’å‰Šé™¤ã™ã‚‹'
                ],
                correct: 1
            },
            '3-6': { // R7 å¯¾å¤–å¯¾å¿œ
                question: 'ä¸åˆ©ç›Šã‚’è¢«ã£ãŸåˆ©ç”¨è€…ã¸ã®å¯¾å¿œã§å¿…è¦ãªã®ã¯ï¼Ÿ',
                options: [
                    'ç”³ç«‹ã¦ã‚’ç„¡è¦–ã™ã‚‹',
                    'ç”³ç«‹ã¦ã‚’å—ã‘ä»˜ã‘ã€æ•‘æ¸ˆã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹',
                    'è²¬ä»»ã‚’å¦å®šã™ã‚‹',
                    'æ³•çš„æªç½®ã§å¯¾æŠ—ã™ã‚‹'
                ],
                correct: 1
            },
            '3-7': { // R8 æ”¹å–„ãƒ»æ˜¯æ­£
                question: 'ãƒã‚¤ã‚¢ã‚¹æ¤œçŸ¥å¾Œã«å®Ÿæ–½ã™ã¹ãã“ã¨ã¯ï¼Ÿ',
                options: [
                    'ä½•ã‚‚å¤‰æ›´ã—ãªã„',
                    'å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®è¦‹ç›´ã—ã‚„ãƒ¢ãƒ‡ãƒ«ã®å†å­¦ç¿’',
                    'ã‚µãƒ¼ãƒ“ã‚¹ã®æ°¸ä¹…åœæ­¢',
                    'å ±å‘Šæ›¸ã®éš è”½'
                ],
                correct: 1
            },

            // Domain 4: å®‰å…¨æ€§ (Safety/Security)
            '4-0': { // R1 æ–¹é‡ãƒ»è²¬ä»»
                question: 'AIã‚·ã‚¹ãƒ†ãƒ å›ºæœ‰ã®è„…å¨ã¨ã—ã¦æŒ™ã’ã‚‰ã‚Œã‚‹ã®ã¯ï¼Ÿ',
                options: [
                    'é›»åŠ›ä¸è¶³',
                    'æ•µå¯¾çš„æ”»æ’ƒã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ³¨å…¥ç­‰',
                    'ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã®è€æœ½åŒ–',
                    'ã‚ªãƒ•ã‚£ã‚¹ã®é¨’éŸ³'
                ],
                correct: 1
            },
            '4-1': { // R2 ãƒªã‚¹ã‚¯è©•ä¾¡
                question: 'ã‚»ãƒ¼ãƒ•ãƒ†ã‚£ãƒªã‚¹ã‚¯ã®è©•ä¾¡å¯¾è±¡ã¯ï¼Ÿ',
                options: [
                    'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°åŠ¹æœ',
                    'AIã«å¯¾ã™ã‚‹æ”»æ’ƒã‚„æ‚ªç”¨ãŒäº‹æ¥­ã‚„åˆ©ç”¨è€…ã«ä¸ãˆã‚‹å½±éŸ¿åº¦',
                    'ã‚ªãƒ•ã‚£ã‚¹ã®ç«‹åœ°',
                    'å¾“æ¥­å“¡ã®æº€è¶³åº¦'
                ],
                correct: 1
            },
            '4-2': { // R3 è¨­è¨ˆãƒ»æ¤œè¨¼
                question: 'ãƒ¢ãƒ‡ãƒ«ã®å …ç‰¢æ€§æ¤œè¨¼ã«å«ã¾ã‚Œã‚‹ã®ã¯ï¼Ÿ',
                options: [
                    'ã‚³ã‚¹ãƒˆåˆ†æ',
                    'ãƒ­ãƒã‚¹ãƒˆãƒã‚¹æ¤œè¨¼ã‚„ãƒ¬ãƒƒãƒ‰ãƒãƒ¼ãƒŸãƒ³ã‚°',
                    'å£²ä¸Šäºˆæ¸¬',
                    'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æˆ¦ç•¥'
                ],
                correct: 1
            },
            '4-3': { // R4 è³‡ç”£ãƒ»ãƒ­ã‚°
                question: 'AIã®é‡è¦è³‡ç”£ç®¡ç†ã§å¿…è¦ãªã®ã¯ï¼Ÿ',
                options: [
                    'è³‡ç”£ã®å…¬é–‹å…±æœ‰',
                    'å°å¸³ç®¡ç†ã€æ”¹ã–ã‚“æ¤œçŸ¥ã€ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®ãƒ­ã‚°',
                    'ã‚³ã‚¹ãƒˆå‰Šæ¸›ã®ã¿',
                    'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°è³‡æ–™ã®ä¿å­˜'
                ],
                correct: 1
            },
            '4-4': { // R5 ç›£è¦–ãƒ»æ¤œçŸ¥
                question: 'ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ¤œçŸ¥ã™ã¹ãã‚‚ã®ã¯ï¼Ÿ',
                options: [
                    'ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³¼è²·å±¥æ­´',
                    'AIã¸ã®ç•°å¸¸ãªå…¥åŠ›ï¼ˆæ”»æ’ƒçš„ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç­‰ï¼‰ã‚„ä¸æ­£ãªæŒ™å‹•',
                    'ã‚µãƒ¼ãƒãƒ¼ãƒ«ãƒ¼ãƒ ã®æ¸©åº¦',
                    'å¾“æ¥­å“¡ã®å‡ºé€€å‹¤'
                ],
                correct: 1
            },
            '4-5': { // R6 å°ã˜è¾¼ã‚ãƒ»å¾©æ—§
                question: 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç™ºç”Ÿæ™‚ã®å¯¾å¿œã§å¿…è¦ãªã®ã¯ï¼Ÿ',
                options: [
                    'å ±å‘Šã‚’é…å»¶ã•ã›ã‚‹',
                    'ã‚·ã‚¹ãƒ†ãƒ éš”é›¢ã€è¢«å®³æ‹¡å¤§é˜²æ­¢ã€å®‰å…¨ãªå¾©æ—§æ‰‹é †',
                    'ãƒ­ã‚°ã®å‰Šé™¤',
                    'ä½•ã‚‚ã—ãªã„'
                ],
                correct: 1
            },
            '4-6': { // R7 å¯¾å¤–å¯¾å¿œ
                question: 'æ”»æ’ƒã«ã‚ˆã‚‹è¢«å®³ç™ºç”Ÿæ™‚ã«å¿…è¦ãªå¯¾å¿œã¯ï¼Ÿ',
                options: [
                    'æƒ…å ±ã‚’éš è”½ã™ã‚‹',
                    'é–¢ä¿‚å½“å±€ã‚„è¢«å®³è€…ã¸ã®é€šçŸ¥',
                    'ã‚µãƒ¼ãƒ“ã‚¹ã‚’å³åº§ã«çµ‚äº†ã™ã‚‹',
                    'è²¬ä»»ã‚’å¦å®šã™ã‚‹'
                ],
                correct: 1
            },
            '4-7': { // R8 æ”¹å–„ãƒ»æ˜¯æ­£
                question: 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ã®æ›´æ–°ãƒˆãƒªã‚¬ãƒ¼ã¯ï¼Ÿ',
                options: [
                    'å£²ä¸Šã®å¤‰åŒ–',
                    'æ–°ãŸãªæ”»æ’ƒæ‰‹æ³•ã‚„ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆåˆ†æ',
                    'å¾“æ¥­å“¡æ•°ã®å¤‰åŒ–',
                    'ã‚ªãƒ•ã‚£ã‚¹ã®ç§»è»¢'
                ],
                correct: 1
            },

            // Domain 5: èª¬æ˜è²¬ä»» (Accountability)
            '5-0': { // R1 æ–¹é‡ãƒ»è²¬ä»»
                question: 'èª¬æ˜è²¬ä»»ã«ãŠã‘ã‚‹é‡è¦ãªå®šç¾©ã¯ï¼Ÿ',
                options: [
                    'AIã®å‡¦ç†é€Ÿåº¦',
                    'é–‹ç™ºè€…ã€æä¾›è€…ã€åˆ©ç”¨è€…ã®å½¹å‰²ã¨è²¬ä»»åˆ†ç•Œç‚¹',
                    'ã‚µãƒ¼ãƒãƒ¼ã®è¨­ç½®å ´æ‰€',
                    'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°äºˆç®—'
                ],
                correct: 1
            },
            '5-1': { // R2 ãƒªã‚¹ã‚¯è©•ä¾¡
                question: 'èª¬æ˜èƒ½åŠ›ã®è©•ä¾¡åŸºæº–ã¯ï¼Ÿ',
                options: [
                    'ã‚³ã‚¹ãƒˆã®é«˜ã•',
                    'AIåˆ¤æ–­çµæœã«å¯¾ã™ã‚‹èª¬æ˜ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ãƒ¬ãƒ™ãƒ«ï¼ˆé‡å¤§åº¦ï¼‰',
                    'ã‚µãƒ¼ãƒãƒ¼ã®å‡¦ç†èƒ½åŠ›',
                    'å¾“æ¥­å“¡æ•°'
                ],
                correct: 1
            },
            '5-2': { // R3 è¨­è¨ˆãƒ»æ¤œè¨¼
                question: 'XAIï¼ˆèª¬æ˜å¯èƒ½AIï¼‰ã®ç›®çš„ã¯ï¼Ÿ',
                options: [
                    'AIã®é€Ÿåº¦å‘ä¸Š',
                    'AIã®æ¨è«–çµæœã®æ ¹æ‹ ã‚’æç¤ºã™ã‚‹',
                    'ã‚³ã‚¹ãƒˆå‰Šæ¸›',
                    'ãƒ‡ãƒ¼ã‚¿é‡ã®å‰Šæ¸›'
                ],
                correct: 1
            },
            '5-3': { // R4 è³‡ç”£ãƒ»ãƒ­ã‚°
                question: 'èª¬æ˜è²¬ä»»ã®ãŸã‚ã«è¨˜éŒ²ã™ã¹ãã“ã¨ã¯ï¼Ÿ',
                options: [
                    'å‡¦ç†æ™‚é–“ã®ã¿',
                    'å€‹åˆ¥ã®åˆ¤æ–­çµæœã«ã¤ã„ã¦ã€Œãªãœãã®çµè«–ã«è‡³ã£ãŸã‹ã€ã®è¨¼è·¡',
                    'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°åŠ¹æœ',
                    'ç«¶åˆä»–ç¤¾ã®å‹•å‘'
                ],
                correct: 1
            },
            '5-4': { // R5 ç›£è¦–ãƒ»æ¤œçŸ¥
                question: 'æ¤œçŸ¥ã™ã¹ãçŠ¶æ³ã¯ï¼Ÿ',
                options: [
                    'ã‚µãƒ¼ãƒãƒ¼ã®è² è·',
                    'èª¬æ˜ãŒå›°é›£ãªæŒ™å‹•ã‚„è²¬ä»»ã®æ‰€åœ¨ãŒæ›–æ˜§ã«ãªã‚Šã†ã‚‹çŠ¶æ³',
                    'ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ­ã‚°ã‚¤ãƒ³',
                    'å£²ä¸Šã®å¤‰å‹•'
                ],
                correct: 1
            },
            '5-5': { // R6 å°ã˜è¾¼ã‚ãƒ»å¾©æ—§
                question: 'è²¬ä»»è¿½åŠãŒç™ºç”Ÿã—ãŸéš›ã«å¿…è¦ãªã®ã¯ï¼Ÿ',
                options: [
                    'è²¬ä»»ã®å¦å®š',
                    'å¯¾å¿œãƒãƒ¼ãƒ çµ„æˆæ‰‹é †',
                    'ãƒ­ã‚°ã®å‰Šé™¤',
                    'å ±å‘Šã®é…å»¶'
                ],
                correct: 1
            },
            '5-6': { // R7 å¯¾å¤–å¯¾å¿œ
                question: 'ç›£æŸ»äººã‚„å½“å±€ã¸ã®èª¬æ˜ã§å¿…è¦ãªã®ã¯ï¼Ÿ',
                options: [
                    'æ›–æ˜§ãªå›ç­”',
                    'åˆç†çš„ãªæ ¹æ‹ ã«åŸºã¥ãå›ç­”ãŒã§ãã‚‹ä½“åˆ¶',
                    'æƒ…å ±ã®éš è”½',
                    'è²¬ä»»ã®è»¢å«'
                ],
                correct: 1
            },
            '5-7': { // R8 æ”¹å–„ãƒ»æ˜¯æ­£
                question: 'èª¬æ˜è²¬ä»»ã‚’æœãŸã›ãªã‹ã£ãŸå ´åˆã«è¦‹ç›´ã™ã¹ãã¯ï¼Ÿ',
                options: [
                    'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æˆ¦ç•¥',
                    'è¨˜éŒ²ãƒ—ãƒ­ã‚»ã‚¹ã‚„è²¬ä»»åˆ†ç•Œç‚¹',
                    'ã‚ªãƒ•ã‚£ã‚¹ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ',
                    'å¾“æ¥­å“¡ã®æœè£…è¦å®š'
                ],
                correct: 1
            },

            // Domain 6: ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ (Compliance)
            '6-0': { // R1 æ–¹é‡ãƒ»è²¬ä»»
                question: 'AIåˆ©æ´»ç”¨ã®ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ã§æ•´å‚™ã™ã¹ãã‚‚ã®ã¯ï¼Ÿ',
                options: [
                    'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°è¨ˆç”»ã®ã¿',
                    'å…¨ç¤¾çš„ãªåŸºæœ¬æ–¹é‡ã€é©ç”¨æ³•ä»¤ã€å†…éƒ¨è¦ç¨‹ä½“ç³»',
                    'ã‚ªãƒ•ã‚£ã‚¹ã®è¨­å‚™',
                    'å¾“æ¥­å“¡ã®ç¦åˆ©åšç”Ÿ'
                ],
                correct: 1
            },
            '6-1': { // R2 ãƒªã‚¹ã‚¯è©•ä¾¡
                question: 'ç‰¹å®šãƒ»è©•ä¾¡ã™ã¹ãæ³•ä»¤ãƒªã‚¹ã‚¯ã¯ï¼Ÿ',
                options: [
                    'ã‚ªãƒ•ã‚£ã‚¹ã®è³ƒè²¸å¥‘ç´„',
                    'è‘—ä½œæ¨©æ³•ã€å€‹äººæƒ…å ±ä¿è­·æ³•ã€æ¥­æ³•ç­‰ã®ç¾©å‹™é•åãƒªã‚¹ã‚¯',
                    'å¾“æ¥­å“¡ã®é€šå‹¤æ‰‹æ®µ',
                    'ã‚ªãƒ•ã‚£ã‚¹ç”¨å“ã®è³¼å…¥'
                ],
                correct: 1
            },
            '6-2': { // R3 è¨­è¨ˆãƒ»æ¤œè¨¼
                question: 'å¤–éƒ¨å§”è¨—å…ˆã‚„SaaSé¸å®šã§å«ã‚ã‚‹ã¹ãè¦ä»¶ã¯ï¼Ÿ',
                options: [
                    'ä¾¡æ ¼ã®å®‰ã•ã®ã¿',
                    'AIã‚¬ãƒãƒŠãƒ³ã‚¹è¦ä»¶',
                    'ãƒ–ãƒ©ãƒ³ãƒ‰ã®çŸ¥ååº¦',
                    'ã‚ªãƒ•ã‚£ã‚¹ã®å ´æ‰€'
                ],
                correct: 1
            },
            '6-3': { // R4 è³‡ç”£ãƒ»ãƒ­ã‚°
                question: 'ã‚¬ãƒãƒŠãƒ³ã‚¹æ´»å‹•ã§ä¿ç®¡ã™ã¹ãè¨˜éŒ²ã¯ï¼Ÿ',
                options: [
                    'ä¼šè­°è­°äº‹éŒ²ã€æ‰¿èªè¨˜éŒ²ã€ç›£æŸ»å ±å‘Šæ›¸ç­‰',
                    'ç¤¾å“¡æ—…è¡Œã®å†™çœŸ',
                    'ã‚ªãƒ•ã‚£ã‚¹ã®æ¸…æƒè¨˜éŒ²',
                    'ä¼‘æ†©æ™‚é–“ã®ãƒ­ã‚°'
                ],
                correct: 0
            },
            '6-4': { // R5 ç›£è¦–ãƒ»æ¤œçŸ¥
                question: 'ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹é•åã®äºˆå…†ã‚’æ¤œçŸ¥ã™ã‚‹ä»•çµ„ã¿ã¯ï¼Ÿ',
                options: [
                    'å£²ä¸Šç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ',
                    'å†…éƒ¨é€šå ±åˆ¶åº¦ã‚„ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ä½“åˆ¶',
                    'ç«¶åˆç›£è¦–ãƒ„ãƒ¼ãƒ«',
                    'SNSåˆ†æ'
                ],
                correct: 1
            },
            '6-5': { // R6 å°ã˜è¾¼ã‚ãƒ»å¾©æ—§
                question: 'é‡å¤§ãªã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹é•åç™ºè¦šæ™‚ã«å¿…è¦ãªã®ã¯ï¼Ÿ',
                options: [
                    'å ±å‘Šã®é…å»¶',
                    'å³æ™‚å ±å‘Šãƒ«ãƒ¼ãƒˆã¨ç·Šæ€¥å¯¾å¿œä½“åˆ¶',
                    'æƒ…å ±ã®éš è”½',
                    'è²¬ä»»ã®å¦å®š'
                ],
                correct: 1
            },
            '6-6': { // R7 å¯¾å¤–å¯¾å¿œ
                question: 'è¦åˆ¶å½“å±€ã¸ã®å¯¾å¿œã§æ˜ç¢ºåŒ–ã™ã¹ãã“ã¨ã¯ï¼Ÿ',
                options: [
                    'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æˆ¦ç•¥',
                    'å ±å‘Šç¾©å‹™ã‚„å¤–éƒ¨ç›£æŸ»ã¸ã®å¯¾å¿œæ‰‹é †',
                    'å¾“æ¥­å“¡ã®è©•ä¾¡åŸºæº–',
                    'ã‚ªãƒ•ã‚£ã‚¹ã®è¨­å‚™'
                ],
                correct: 1
            },
            '6-7': { // R8 æ”¹å–„ãƒ»æ˜¯æ­£
                question: 'ã‚¬ãƒãƒŠãƒ³ã‚¹ä½“åˆ¶ã®ç¶™ç¶šçš„æ”¹å–„ã«å¿…è¦ãªã®ã¯ï¼Ÿ',
                options: [
                    'å£²ä¸Šç›®æ¨™ã®å¤‰æ›´',
                    'å®šæœŸçš„ãªå†…éƒ¨ç›£æŸ»ã‚„å¤–éƒ¨è©•ä¾¡ã®å®Ÿæ–½ã¨æŒ‡æ‘˜äº‹é …ã¸ã®å¯¾å¿œ',
                    'ã‚ªãƒ•ã‚£ã‚¹ã®ç§»è»¢',
                    'å¾“æ¥­å“¡æ•°ã®å¢—åŠ '
                ],
                correct: 1
            },

            // Domain 7: ãƒ¡ãƒ³ã‚¿ãƒ«æŒç¶šæ€§ (Mental Sustainability)
            '7-0': { // R1 æ–¹é‡ãƒ»è²¬ä»»
                question: 'ãƒ¡ãƒ³ã‚¿ãƒ«æŒç¶šæ€§ã®æ–¹é‡ã§é‡è¦–ã™ã¹ãã“ã¨ã¯ï¼Ÿ',
                options: [
                    'AIã®å‡¦ç†åŠ¹ç‡æœ€å¤§åŒ–',
                    'å¾“æ¥­å“¡ã‚„åˆ©ç”¨è€…ã®ç²¾ç¥çš„å¥åº·ã‚’æãªã‚ãªã„äººé–“ä¸­å¿ƒã®é‹ç”¨',
                    'ã‚³ã‚¹ãƒˆå‰Šæ¸›ã®å¾¹åº•',
                    '24æ™‚é–“ç¨¼åƒã®æ¨é€²'
                ],
                correct: 1
            },
            '7-1': { // R2 ãƒªã‚¹ã‚¯è©•ä¾¡
                question: 'AIãŒäººé–“ã«ä¸ãˆã‚‹å¿ƒç†çš„è² è·ã¨ã—ã¦è©•ä¾¡ã™ã¹ãã¯ï¼Ÿ',
                options: [
                    'ã‚µãƒ¼ãƒãƒ¼ã®è² è·',
                    'å¸¸æ™‚æ¥ç¶šã€æƒ…å ±éå¤šã€åˆ¤æ–­ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ç­‰',
                    'ã‚ªãƒ•ã‚£ã‚¹ã®æ¸©åº¦',
                    'é€šå‹¤æ™‚é–“'
                ],
                correct: 1
            },
            '7-2': { // R3 è¨­è¨ˆãƒ»æ¤œè¨¼
                question: 'UI/UXè¨­è¨ˆã§è€ƒæ…®ã™ã¹ãã“ã¨ã¯ï¼Ÿ',
                options: [
                    'æ©Ÿèƒ½ã®æœ€å¤§åŒ–',
                    'èªçŸ¥è² è·ã®ä½æ¸›ã€éåº¦ãªä¾å­˜ã‚„ä¸å®‰ã‚’ç”Ÿã¾ãªã„è¨­è¨ˆ',
                    'ã‚³ã‚¹ãƒˆã®æœ€å°åŒ–',
                    'å‡¦ç†é€Ÿåº¦ã®å‘ä¸Š'
                ],
                correct: 1
            },
            '7-3': { // R4 è³‡ç”£ãƒ»ãƒ­ã‚°
                question: 'å¥åº·æŒ‡æ¨™ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ç®¡ç†ã™ã¹ãã‚‚ã®ã¯ï¼Ÿ',
                options: [
                    'ã‚µãƒ¼ãƒãƒ¼ã®ç¨¼åƒç‡',
                    'æ‹…å½“è€…ã®åŠ´åƒæ™‚é–“ã€ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯çµæœç­‰',
                    'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°åŠ¹æœ',
                    'å£²ä¸Šãƒ‡ãƒ¼ã‚¿'
                ],
                correct: 1
            },
            '7-4': { // R5 ç›£è¦–ãƒ»æ¤œçŸ¥
                question: 'æ¤œçŸ¥ã™ã¹ãå…†å€™ã¯ï¼Ÿ',
                options: [
                    'ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼',
                    'é‹ç”¨æ‹…å½“è€…ã®ç‡ƒãˆå°½ãï¼ˆãƒãƒ¼ãƒ³ã‚¢ã‚¦ãƒˆï¼‰ã®å…†å€™ã‚„éåº¦ãªè² æ‹…é›†ä¸­',
                    'ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã®æ¸›å°‘',
                    'å£²ä¸Šã®å¤‰å‹•'
                ],
                correct: 1
            },
            '7-5': { // R6 å°ã˜è¾¼ã‚ãƒ»å¾©æ—§
                question: 'ãƒ¡ãƒ³ã‚¿ãƒ«ä¸èª¿ç™ºç”Ÿæ™‚ã®å¯¾å¿œã¯ï¼Ÿ',
                options: [
                    'æ¥­å‹™ã‚’ç¶™ç¶šã•ã›ã‚‹',
                    'æ¥­å‹™ã‹ã‚‰ä¸€æ™‚çš„ã«é›¢è„±ã•ã›ã€ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä½“åˆ¶',
                    'é…ç½®è»¢æ›ã®ã¿',
                    'è©•ä¾¡ã‚’ä¸‹ã’ã‚‹'
                ],
                correct: 1
            },
            '7-6': { // R7 å¯¾å¤–å¯¾å¿œ
                question: 'åˆ©ç”¨è€…ã¸ã®é…æ…®ã§ç‰¹ã«é‡è¦ãªå¯¾è±¡ã¯ï¼Ÿ',
                options: [
                    'é«˜åå…¥å±¤',
                    'å­ä¾›ã‚„è„†å¼±ãªç«‹å ´ã®äºº',
                    'ITãƒªãƒ†ãƒ©ã‚·ãƒ¼ãŒé«˜ã„äºº',
                    'ä¼æ¥­ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿'
                ],
                correct: 1
            },
            '7-7': { // R8 æ”¹å–„ãƒ»æ˜¯æ­£
                question: 'æ¥­å‹™ãƒ•ãƒ­ãƒ¼ã®è¦‹ç›´ã—ã«å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã¯ï¼Ÿ',
                options: [
                    'å£²ä¸Šãƒ‡ãƒ¼ã‚¿ã®ã¿',
                    'å¾“æ¥­å“¡ã‚µãƒ¼ãƒ™ã‚¤ã‚„å¥åº·ãƒ‡ãƒ¼ã‚¿',
                    'ç«¶åˆä»–ç¤¾ã®æƒ…å ±',
                    'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°åŠ¹æœ'
                ],
                correct: 1
            }
        };

        function openQuiz(domainIndex, processIndex) {
            const domain = domainData[domainIndex];
            const process = domain.processes[processIndex];
            const questionKey = `${domainIndex}-${processIndex}`;
            const question = quizQuestions[questionKey];

            if (!question) {
                console.error('Quiz question not found for:', questionKey);
                return;
            }

            quizState.currentDomain = domainIndex;
            quizState.currentProcess = processIndex;
            quizState.selectedAnswer = null;

            // Update modal content
            const domainTag = document.getElementById('quizDomainTag');
            domainTag.innerHTML = `<span class="icon">${domain.icon}</span><span>${domain.name}</span>`;
            domainTag.style.borderColor = domain.color;
            domainTag.style.color = domain.color;

            document.getElementById('quizProcessCode').textContent = process.code;
            document.getElementById('quizProcessCode').style.borderColor = domain.color;
            document.getElementById('quizProcessCode').style.color = domain.color;
            document.getElementById('quizProcessName').textContent = process.name;

            document.getElementById('quizQuestion').textContent = question.question;

            // Render options
            const optionsContainer = document.getElementById('quizOptions');
            const markers = ['A', 'B', 'C', 'D'];
            optionsContainer.innerHTML = question.options.map((option, i) => `
                <div class="quiz-option" onclick="selectQuizOption(${i})" data-index="${i}">
                    <div class="quiz-option-marker">${markers[i]}</div>
                    <div class="quiz-option-text">${option}</div>
                </div>
            `).join('');

            // Update stats
            document.getElementById('quizCombo').textContent = quizState.combo;
            document.getElementById('quizStreak').textContent = quizState.totalCorrect;

            // Reset submit button
            document.getElementById('quizSubmitBtn').disabled = true;

            // Show modal
            document.getElementById('quizOverlay').classList.add('active');
        }

        function selectQuizOption(index) {
            quizState.selectedAnswer = index;

            // Update UI
            document.querySelectorAll('.quiz-option').forEach((opt, i) => {
                opt.classList.toggle('selected', i === index);
            });

            document.getElementById('quizSubmitBtn').disabled = false;
        }

        function submitQuiz() {
            if (quizState.selectedAnswer === null) return;

            const questionKey = `${quizState.currentDomain}-${quizState.currentProcess}`;
            const question = quizQuestions[questionKey];
            const isCorrect = quizState.selectedAnswer === question.correct;

            quizState.totalAttempts++;

            // Show correct/incorrect state
            document.querySelectorAll('.quiz-option').forEach((opt, i) => {
                if (i === question.correct) {
                    opt.classList.add('correct');
                } else if (i === quizState.selectedAnswer && !isCorrect) {
                    opt.classList.add('incorrect');
                }
            });

            // Disable further interaction
            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            document.getElementById('quizSubmitBtn').disabled = true;

            if (isCorrect) {
                quizState.combo++;
                quizState.totalCorrect++;
                if (quizState.combo > quizState.maxCombo) {
                    quizState.maxCombo = quizState.combo;
                }

                // Calculate XP with combo bonus
                const baseXP = 20;
                const comboBonus = Math.min(quizState.combo - 1, 10) * 5; // Max 50 bonus from combo
                const totalXP = baseXP + comboBonus;

                // Show combo if applicable
                if (quizState.combo >= 2) {
                    showCombo(quizState.combo);
                }

                // Show success result
                setTimeout(() => {
                    showQuizResult(true, totalXP);

                    // Actually check the item
                    const itemId = `${quizState.currentDomain}-${quizState.currentProcess}`;
                    gameState.checkedItems.add(itemId);
                    sessionChecks++;

                    addXP(totalXP);
                    updateStats();
                    renderDomainList();
                    selectDomain(quizState.currentDomain); // Refresh detail panel
                    createCheckParticles(quizState.currentDomain);
                    saveState();
                    saveQuizState();
                    checkAllAchievements();

                    // Close quiz after delay
                    setTimeout(() => {
                        closeQuiz();
                    }, 1000);
                }, 500);
            } else {
                quizState.combo = 0;

                // Show failure result
                setTimeout(() => {
                    showQuizResult(false, 0);
                    saveQuizState();

                    // Close quiz after delay
                    setTimeout(() => {
                        closeQuiz();
                    }, 1000);
                }, 500);
            }
        }

        function showCombo(combo) {
            const comboDisplay = document.getElementById('comboDisplay');
            comboDisplay.querySelector('.combo-count').textContent = combo;
            comboDisplay.classList.add('show');

            setTimeout(() => {
                comboDisplay.classList.remove('show');
            }, 800);
        }

        function showQuizResult(isCorrect, xp) {
            const result = document.getElementById('quizResult');
            result.className = 'quiz-result ' + (isCorrect ? 'correct' : 'incorrect');
            result.innerHTML = isCorrect
                ? `<span class="result-icon">â­</span><span class="result-text">CONQUERED!</span><span class="result-xp">+${xp} XP</span>`
                : `<span class="result-icon">ğŸ’¥</span><span class="result-text">FAILED...</span>`;
            result.classList.add('show');

            setTimeout(() => {
                result.classList.remove('show');
            }, 1500);
        }

        function closeQuiz() {
            document.getElementById('quizOverlay').classList.remove('active');
            quizState.currentDomain = null;
            quizState.currentProcess = null;
            quizState.selectedAnswer = null;
        }

        function saveQuizState() {
            localStorage.setItem('aiGovernanceQuizState', JSON.stringify({
                combo: quizState.combo,
                maxCombo: quizState.maxCombo,
                totalCorrect: quizState.totalCorrect,
                totalAttempts: quizState.totalAttempts
            }));
        }

        // ============ THREE.JS SETUP ============
        let scene, camera, renderer, nodes = [], connections = [], centralHub;
        let raycaster, mouse;
        let autoRotate = true;
        let targetRotation = { x: 0, y: 0 };
        let currentRotation = { x: 0, y: 0 };

        function initThree() {
            // Scene
            scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2(0x030305, 0.015);

            // Camera
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 5, 25);
            camera.lookAt(0, 0, 0);

            // Renderer
            renderer = new THREE.WebGLRenderer({
                canvas: document.getElementById('canvas3d'),
                antialias: true,
                alpha: true
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

            // Raycaster for interaction
            raycaster = new THREE.Raycaster();
            mouse = new THREE.Vector2();

            // Create visualization
            createCentralHub();
            createNodes();
            createConnections();
            createParticleField();
            createGrid();

            // Events
            window.addEventListener('resize', onWindowResize);
            window.addEventListener('mousemove', onMouseMove);
            window.addEventListener('mousedown', onMouseDown);
            window.addEventListener('mouseup', onMouseUp);
            window.addEventListener('wheel', onWheel);
            document.getElementById('canvas3d').addEventListener('click', onClick);

            animate();
        }

        function createCentralHub() {
            // Core sphere
            const coreGeometry = new THREE.IcosahedronGeometry(2, 2);
            const coreMaterial = new THREE.MeshBasicMaterial({
                color: 0x00f5ff,
                wireframe: true,
                transparent: true,
                opacity: 0.6
            });
            centralHub = new THREE.Mesh(coreGeometry, coreMaterial);
            scene.add(centralHub);

            // Inner glow
            const glowGeometry = new THREE.SphereGeometry(1.5, 32, 32);
            const glowMaterial = new THREE.MeshBasicMaterial({
                color: 0x00f5ff,
                transparent: true,
                opacity: 0.3
            });
            const glow = new THREE.Mesh(glowGeometry, glowMaterial);
            centralHub.add(glow);

            // Outer rings
            for (let i = 0; i < 3; i++) {
                const ringGeometry = new THREE.RingGeometry(2.5 + i * 0.5, 2.6 + i * 0.5, 64);
                const ringMaterial = new THREE.MeshBasicMaterial({
                    color: 0x00f5ff,
                    side: THREE.DoubleSide,
                    transparent: true,
                    opacity: 0.3 - i * 0.1
                });
                const ring = new THREE.Mesh(ringGeometry, ringMaterial);
                ring.rotation.x = Math.PI / 2 + (i * 0.3);
                ring.rotation.y = i * 0.5;
                centralHub.add(ring);
            }
        }

        function createNodes() {
            const radius = 12;

            domainData.forEach((domain, i) => {
                const angle = (i * Math.PI * 2 / 8) - Math.PI / 2;
                const x = radius * Math.cos(angle);
                const z = radius * Math.sin(angle);
                const y = Math.sin(i * 0.5) * 2;

                // Node group
                const nodeGroup = new THREE.Group();
                nodeGroup.position.set(x, y, z);
                nodeGroup.userData = { domainIndex: i, type: 'node' };

                // Main sphere
                const geometry = new THREE.IcosahedronGeometry(1.2, 1);
                const material = new THREE.MeshBasicMaterial({
                    color: new THREE.Color(domain.color),
                    wireframe: true,
                    transparent: true,
                    opacity: 0.8
                });
                const mesh = new THREE.Mesh(geometry, material);
                nodeGroup.add(mesh);

                // Inner core
                const coreGeo = new THREE.SphereGeometry(0.6, 16, 16);
                const coreMat = new THREE.MeshBasicMaterial({
                    color: new THREE.Color(domain.color),
                    transparent: true,
                    opacity: 0.5
                });
                const core = new THREE.Mesh(coreGeo, coreMat);
                nodeGroup.add(core);

                // Orbiting rings
                const ringGeo = new THREE.TorusGeometry(1.5, 0.02, 8, 64);
                const ringMat = new THREE.MeshBasicMaterial({
                    color: new THREE.Color(domain.color),
                    transparent: true,
                    opacity: 0.4
                });
                const ring = new THREE.Mesh(ringGeo, ringMat);
                ring.rotation.x = Math.random() * Math.PI;
                nodeGroup.add(ring);

                // Point light
                const light = new THREE.PointLight(new THREE.Color(domain.color), 0.5, 8);
                nodeGroup.add(light);

                nodes.push({
                    group: nodeGroup,
                    mesh: mesh,
                    ring: ring,
                    angle: angle,
                    baseY: y,
                    domain: domain
                });

                scene.add(nodeGroup);
            });
        }

        function createConnections() {
            const material = new THREE.LineBasicMaterial({
                color: 0x00f5ff,
                transparent: true,
                opacity: 0.2
            });

            // Connect adjacent nodes
            for (let i = 0; i < 8; i++) {
                const next = (i + 1) % 8;
                const points = [];

                const start = nodes[i].group.position;
                const end = nodes[next].group.position;

                // Curved connection
                for (let t = 0; t <= 20; t++) {
                    const p = t / 20;
                    const x = start.x + (end.x - start.x) * p;
                    const y = start.y + (end.y - start.y) * p + Math.sin(p * Math.PI) * 2;
                    const z = start.z + (end.z - start.z) * p;
                    points.push(new THREE.Vector3(x, y, z));
                }

                const geometry = new THREE.BufferGeometry().setFromPoints(points);
                const line = new THREE.Line(geometry, material.clone());
                connections.push(line);
                scene.add(line);
            }

            // Connect to center
            nodes.forEach((node, i) => {
                const points = [];
                const start = node.group.position;
                const end = new THREE.Vector3(0, 0, 0);

                for (let t = 0; t <= 15; t++) {
                    const p = t / 15;
                    const x = start.x * (1 - p);
                    const y = start.y * (1 - p) + Math.sin(p * Math.PI) * 1.5;
                    const z = start.z * (1 - p);
                    points.push(new THREE.Vector3(x, y, z));
                }

                const geometry = new THREE.BufferGeometry().setFromPoints(points);
                const lineMat = new THREE.LineBasicMaterial({
                    color: new THREE.Color(node.domain.color),
                    transparent: true,
                    opacity: 0.15
                });
                const line = new THREE.Line(geometry, lineMat);
                connections.push(line);
                scene.add(line);
            });
        }

        function createParticleField() {
            const particleCount = 500;
            const positions = new Float32Array(particleCount * 3);
            const colors = new Float32Array(particleCount * 3);

            for (let i = 0; i < particleCount; i++) {
                const i3 = i * 3;
                const radius = 5 + Math.random() * 30;
                const theta = Math.random() * Math.PI * 2;
                const phi = Math.random() * Math.PI;

                positions[i3] = radius * Math.sin(phi) * Math.cos(theta);
                positions[i3 + 1] = radius * Math.cos(phi);
                positions[i3 + 2] = radius * Math.sin(phi) * Math.sin(theta);

                const color = new THREE.Color(domainData[Math.floor(Math.random() * 8)].color);
                colors[i3] = color.r;
                colors[i3 + 1] = color.g;
                colors[i3 + 2] = color.b;
            }

            const geometry = new THREE.BufferGeometry();
            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));

            const material = new THREE.PointsMaterial({
                size: 0.1,
                vertexColors: true,
                transparent: true,
                opacity: 0.6,
                blending: THREE.AdditiveBlending
            });

            const particles = new THREE.Points(geometry, material);
            particles.userData.type = 'particles';
            scene.add(particles);
        }

        function createGrid() {
            const gridHelper = new THREE.GridHelper(50, 50, 0x00f5ff, 0x001520);
            gridHelper.position.y = -8;
            gridHelper.material.opacity = 0.3;
            gridHelper.material.transparent = true;
            scene.add(gridHelper);
        }

        // ============ ANIMATION ============
        let time = 0;

        function animate() {
            requestAnimationFrame(animate);
            time += 0.01;

            // Auto rotate
            if (autoRotate) {
                targetRotation.y += 0.002;
            }

            // Smooth camera rotation
            currentRotation.x += (targetRotation.x - currentRotation.x) * 0.05;
            currentRotation.y += (targetRotation.y - currentRotation.y) * 0.05;

            // Update camera position
            const cameraRadius = camera.position.length();
            camera.position.x = Math.sin(currentRotation.y) * Math.cos(currentRotation.x) * cameraRadius;
            camera.position.y = Math.sin(currentRotation.x) * cameraRadius;
            camera.position.z = Math.cos(currentRotation.y) * Math.cos(currentRotation.x) * cameraRadius;
            camera.lookAt(0, 0, 0);

            // Animate central hub
            if (centralHub) {
                centralHub.rotation.y += 0.005;
                centralHub.rotation.x = Math.sin(time * 0.5) * 0.1;
                centralHub.children.forEach((child, i) => {
                    if (child.type === 'Mesh' && child.geometry.type === 'RingGeometry') {
                        child.rotation.z += 0.01 * (i + 1);
                    }
                });
            }

            // Animate nodes
            nodes.forEach((node, i) => {
                // Floating motion
                node.group.position.y = node.baseY + Math.sin(time + i) * 0.5;

                // Rotation
                node.mesh.rotation.x += 0.01;
                node.mesh.rotation.y += 0.015;
                node.ring.rotation.z += 0.02;

                // Pulse based on progress
                const progress = getDomainProgress(i);
                const scale = 1 + (progress / 8) * 0.3 + Math.sin(time * 2 + i) * 0.05;
                node.group.scale.setScalar(scale);

                // Highlight selected
                if (i === gameState.selectedDomain) {
                    node.mesh.material.opacity = 0.9 + Math.sin(time * 4) * 0.1;
                } else {
                    node.mesh.material.opacity = 0.6;
                }
            });

            // Animate connections
            connections.forEach((line, i) => {
                line.material.opacity = 0.1 + Math.sin(time * 2 + i * 0.5) * 0.05;
            });

            // Animate particles
            scene.children.forEach(child => {
                if (child.userData.type === 'particles') {
                    child.rotation.y += 0.0005;
                }
            });

            renderer.render(scene, camera);
            updateMinimap();
        }

        // ============ INTERACTION ============
        let isDragging = false;
        let previousMousePosition = { x: 0, y: 0 };

        function onMouseMove(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

            if (isDragging) {
                const deltaX = event.clientX - previousMousePosition.x;
                const deltaY = event.clientY - previousMousePosition.y;

                targetRotation.y += deltaX * 0.005;
                targetRotation.x += deltaY * 0.005;
                targetRotation.x = Math.max(-Math.PI / 3, Math.min(Math.PI / 3, targetRotation.x));
            }

            previousMousePosition = { x: event.clientX, y: event.clientY };

            // Tooltip
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(nodes.map(n => n.group), true);

            if (intersects.length > 0) {
                let obj = intersects[0].object;
                while (obj.parent && !obj.userData.domainIndex && obj.userData.domainIndex !== 0) {
                    obj = obj.parent;
                }
                if (obj.userData.domainIndex !== undefined) {
                    const domain = domainData[obj.userData.domainIndex];
                    showTooltip(event.clientX, event.clientY, `${domain.icon} ${domain.name}`);
                }
            } else {
                hideTooltip();
            }
        }

        function onMouseDown(event) {
            if (event.target.tagName === 'CANVAS') {
                isDragging = true;
                autoRotate = false;
                document.getElementById('btnRotate').classList.remove('active');
            }
        }

        function onMouseUp() {
            isDragging = false;
        }

        function onWheel(event) {
            const zoomSpeed = 0.002;
            const newZ = camera.position.length() + event.deltaY * zoomSpeed * camera.position.length();
            const clampedZ = Math.max(10, Math.min(50, newZ));
            camera.position.normalize().multiplyScalar(clampedZ);
        }

        function onClick(event) {
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(nodes.map(n => n.group), true);

            if (intersects.length > 0) {
                let obj = intersects[0].object;
                while (obj.parent && !obj.userData.domainIndex && obj.userData.domainIndex !== 0) {
                    obj = obj.parent;
                }
                if (obj.userData.domainIndex !== undefined) {
                    selectDomain(obj.userData.domainIndex);
                    triggerGlitch();
                }
            }
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        // ============ UI FUNCTIONS ============
        function initUI() {
            renderDomainList();
            updateStats();
            updateXP();
        }

        function renderDomainList() {
            const container = document.getElementById('domainList');
            container.innerHTML = domainData.map((domain, i) => {
                const progress = getDomainProgress(i);
                const isComplete = progress === 8;
                return `
                    <div class="domain-card ${i === gameState.selectedDomain ? 'active' : ''} ${isComplete ? 'completed' : ''}"
                         onclick="selectDomain(${i})" data-domain="${i}">
                        <div class="domain-icon" style="border-color: ${domain.color}; color: ${domain.color};">
                            ${domain.icon}
                        </div>
                        <div class="domain-info">
                            <div class="domain-name" style="color: ${domain.color};">${domain.name}</div>
                            <div class="domain-progress">
                                <div class="domain-progress-fill" style="width: ${progress / 8 * 100}%; background: ${domain.color};"></div>
                            </div>
                        </div>
                        <div class="domain-score" style="color: ${domain.color};">${progress}/8</div>
                    </div>
                `;
            }).join('');
        }

        function selectDomain(index) {
            gameState.selectedDomain = index;
            viewedDomains.add(index);

            // Update domain list
            document.querySelectorAll('.domain-card').forEach((card, i) => {
                card.classList.toggle('active', i === index);
            });

            // Update detail panel
            const domain = domainData[index];
            const panel = document.getElementById('detailPanel');
            const header = document.getElementById('detailHeader');

            document.getElementById('detailDomainId').textContent = `DOMAIN.${domain.id}`;
            document.getElementById('detailDomainId').style.color = domain.color;
            document.getElementById('detailDomainName').innerHTML = `<span class="icon">${domain.icon}</span><span style="color: ${domain.color};">${domain.name}</span>`;
            document.getElementById('detailDomainDesc').textContent = domain.desc;
            header.style.borderBottomColor = domain.color;

            // Render processes
            document.getElementById('detailContent').innerHTML = domain.processes.map((proc, pi) => {
                const itemId = `${index}-${pi}`;
                const isChecked = gameState.checkedItems.has(itemId);
                return `
                    <div class="process-card ${isChecked ? 'checked' : ''}" onclick="toggleCheck(${index}, ${pi})" data-item="${itemId}">
                        <div class="process-header">
                            <span class="process-code" style="color: ${domain.color}; border-color: ${domain.color};">${proc.code}</span>
                            <span class="process-name">${proc.name}</span>
                            <div class="process-check">${isChecked ? 'âœ“' : ''}</div>
                        </div>
                        <div class="process-text">${proc.text}</div>
                    </div>
                `;
            }).join('');

            panel.classList.add('visible');

            // Check explorer achievement
            if (viewedDomains.size === 8) {
                checkAchievement('explorer');
            }

            // Focus camera on selected node
            focusOnNode(index);
        }

        function focusOnNode(index) {
            const node = nodes[index];
            const angle = node.angle;
            targetRotation.y = -angle + Math.PI / 2;
        }

        function toggleCheck(domainIndex, processIndex) {
            const itemId = `${domainIndex}-${processIndex}`;
            const wasChecked = gameState.checkedItems.has(itemId);

            if (wasChecked) {
                // Allow unchecking directly (no quiz needed)
                gameState.checkedItems.delete(itemId);
                addXP(-10);

                // Update UI
                const card = document.querySelector(`[data-item="${itemId}"]`);
                if (card) {
                    card.classList.remove('checked');
                    card.querySelector('.process-check').textContent = '';
                }

                updateStats();
                renderDomainList();
                saveState();
            } else {
                // Open quiz to check (conquer) the item
                openQuiz(domainIndex, processIndex);
            }
        }

        function getDomainProgress(domainIndex) {
            let count = 0;
            for (let i = 0; i < 8; i++) {
                if (gameState.checkedItems.has(`${domainIndex}-${i}`)) count++;
            }
            return count;
        }

        function updateStats() {
            const checked = gameState.checkedItems.size;
            document.getElementById('checkedCount').textContent = checked;
            document.getElementById('completionRate').textContent = Math.round(checked / 64 * 100) + '%';
        }

        function addXP(amount) {
            gameState.xp += amount;

            // Level up check
            const xpForLevel = gameState.level * 100;
            while (gameState.xp >= xpForLevel) {
                gameState.xp -= xpForLevel;
                gameState.level++;
                showLevelUp();
            }

            if (gameState.xp < 0) gameState.xp = 0;

            updateXP();
            saveState();
        }

        function updateXP() {
            const xpForLevel = gameState.level * 100;
            document.getElementById('levelNum').textContent = gameState.level;
            document.getElementById('currentXP').textContent = gameState.xp;
            document.getElementById('maxXP').textContent = xpForLevel;
            document.getElementById('xpFill').style.width = (gameState.xp / xpForLevel * 100) + '%';
        }

        function showLevelUp() {
            showAchievementPopup({
                icon: 'â¬†ï¸',
                name: `Level ${gameState.level}`,
                desc: 'You leveled up!',
                xp: 0
            });
        }

        function checkAllAchievements() {
            achievements.forEach(achievement => {
                if (!gameState.achievements.includes(achievement.id) && achievement.condition()) {
                    checkAchievement(achievement.id);
                }
            });
        }

        function checkAchievement(achievementId) {
            if (gameState.achievements.includes(achievementId)) return;

            const achievement = achievements.find(a => a.id === achievementId);
            if (achievement) {
                gameState.achievements.push(achievementId);
                addXP(achievement.xp);
                showAchievementPopup(achievement);
                saveState();
            }
        }

        function showAchievementPopup(achievement) {
            const popup = document.getElementById('achievementPopup');
            document.getElementById('achievementIcon').textContent = achievement.icon;
            document.getElementById('achievementName').textContent = achievement.name;
            document.getElementById('achievementDesc').textContent = achievement.desc;
            document.getElementById('achievementXP').textContent = achievement.xp > 0 ? `+${achievement.xp} XP` : '';

            popup.classList.add('show');

            setTimeout(() => {
                popup.classList.remove('show');
            }, 3000);
        }

        function createCheckParticles(domainIndex) {
            // Visual feedback for checking item
            const node = nodes[domainIndex];
            const color = new THREE.Color(node.domain.color);

            // Create burst particles
            const particleCount = 20;
            const geometry = new THREE.BufferGeometry();
            const positions = new Float32Array(particleCount * 3);

            for (let i = 0; i < particleCount; i++) {
                positions[i * 3] = node.group.position.x;
                positions[i * 3 + 1] = node.group.position.y;
                positions[i * 3 + 2] = node.group.position.z;
            }

            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));

            const material = new THREE.PointsMaterial({
                color: color,
                size: 0.3,
                transparent: true,
                opacity: 1,
                blending: THREE.AdditiveBlending
            });

            const particles = new THREE.Points(geometry, material);
            scene.add(particles);

            // Animate particles
            const velocities = [];
            for (let i = 0; i < particleCount; i++) {
                velocities.push({
                    x: (Math.random() - 0.5) * 0.3,
                    y: Math.random() * 0.2,
                    z: (Math.random() - 0.5) * 0.3
                });
            }

            let frame = 0;
            const animateParticles = () => {
                frame++;
                const positions = particles.geometry.attributes.position.array;

                for (let i = 0; i < particleCount; i++) {
                    positions[i * 3] += velocities[i].x;
                    positions[i * 3 + 1] += velocities[i].y;
                    positions[i * 3 + 2] += velocities[i].z;
                    velocities[i].y -= 0.005; // gravity
                }

                particles.geometry.attributes.position.needsUpdate = true;
                particles.material.opacity = 1 - frame / 60;

                if (frame < 60) {
                    requestAnimationFrame(animateParticles);
                } else {
                    scene.remove(particles);
                }
            };

            animateParticles();
        }

        // ============ MINIMAP ============
        function updateMinimap() {
            const canvas = document.getElementById('minimapCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 150;
            canvas.height = 150;

            ctx.fillStyle = 'rgba(0, 10, 20, 0.5)';
            ctx.fillRect(0, 0, 150, 150);

            const centerX = 75;
            const centerY = 75;
            const scale = 3;

            // Draw connections
            ctx.strokeStyle = 'rgba(0, 245, 255, 0.2)';
            ctx.lineWidth = 1;
            nodes.forEach((node, i) => {
                const next = nodes[(i + 1) % 8];
                ctx.beginPath();
                ctx.moveTo(centerX + node.group.position.x * scale, centerY + node.group.position.z * scale);
                ctx.lineTo(centerX + next.group.position.x * scale, centerY + next.group.position.z * scale);
                ctx.stroke();
            });

            // Draw nodes
            nodes.forEach((node, i) => {
                const x = centerX + node.group.position.x * scale;
                const y = centerY + node.group.position.z * scale;
                const progress = getDomainProgress(i) / 8;

                ctx.beginPath();
                ctx.arc(x, y, 4 + progress * 3, 0, Math.PI * 2);
                ctx.fillStyle = node.domain.color;
                ctx.globalAlpha = 0.3 + progress * 0.7;
                ctx.fill();
                ctx.globalAlpha = 1;

                if (i === gameState.selectedDomain) {
                    ctx.strokeStyle = '#ffffff';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }
            });

            // Draw center
            ctx.beginPath();
            ctx.arc(centerX, centerY, 5, 0, Math.PI * 2);
            ctx.fillStyle = '#00f5ff';
            ctx.globalAlpha = 0.5;
            ctx.fill();

            // Draw camera direction
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            const camX = centerX + Math.sin(currentRotation.y) * 20;
            const camY = centerY + Math.cos(currentRotation.y) * 20;
            ctx.lineTo(camX, camY);
            ctx.strokeStyle = '#ff00ff';
            ctx.lineWidth = 2;
            ctx.globalAlpha = 0.8;
            ctx.stroke();
        }

        // ============ UTILITIES ============
        function triggerGlitch() {
            const glitch = document.getElementById('glitchOverlay');
            glitch.style.opacity = '0.3';
            setTimeout(() => glitch.style.opacity = '0', 100);
        }

        function showTooltip(x, y, text) {
            const tooltip = document.getElementById('tooltip');
            tooltip.textContent = text;
            tooltip.style.left = (x + 15) + 'px';
            tooltip.style.top = (y + 15) + 'px';
            tooltip.classList.add('visible');
        }

        function hideTooltip() {
            document.getElementById('tooltip').classList.remove('visible');
        }

        function toggleAutoRotate() {
            autoRotate = !autoRotate;
            document.getElementById('btnRotate').classList.toggle('active', autoRotate);
        }

        function resetCamera() {
            targetRotation = { x: 0.3, y: 0 };
            camera.position.set(0, 5, 25);
            triggerGlitch();
        }

        function exportProgress() {
            const data = {
                checkedItems: Array.from(gameState.checkedItems),
                xp: gameState.xp,
                level: gameState.level,
                achievements: gameState.achievements,
                exportDate: new Date().toISOString(),
                completionRate: Math.round(gameState.checkedItems.size / 64 * 100) + '%'
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ai-governance-progress-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);

            showAchievementPopup({
                icon: 'ğŸ“',
                name: 'Data Exported',
                desc: 'Your progress has been saved',
                xp: 0
            });
        }

        function saveState() {
            localStorage.setItem('aiGovernanceState', JSON.stringify({
                checkedItems: Array.from(gameState.checkedItems),
                xp: gameState.xp,
                level: gameState.level,
                achievements: gameState.achievements
            }));
        }

        // ============ PARTICLES OVERLAY ============
        function initParticlesOverlay() {
            const canvas = document.getElementById('particlesOverlay');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const particles = [];
            for (let i = 0; i < 50; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    vx: (Math.random() - 0.5) * 0.5,
                    vy: (Math.random() - 0.5) * 0.5,
                    size: Math.random() * 2 + 1,
                    color: domainData[Math.floor(Math.random() * 8)].color
                });
            }

            function animateOverlay() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                particles.forEach(p => {
                    p.x += p.vx;
                    p.y += p.vy;

                    if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                    if (p.y < 0 || p.y > canvas.height) p.vy *= -1;

                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fillStyle = p.color;
                    ctx.globalAlpha = 0.3;
                    ctx.fill();
                });

                requestAnimationFrame(animateOverlay);
            }

            animateOverlay();

            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        }

        // ============ INIT ============
        document.addEventListener('DOMContentLoaded', () => {
            initThree();
            initUI();
            initParticlesOverlay();
            selectDomain(0);
        });
    </script>
</body>
</html>
